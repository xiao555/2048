{"version":3,"sources":["components/button/button.module.css","components/sw-update-popup/sw-update-popup.module.css","components/header/header.module.css","components/post-list/post-list.module.css","components/button/index.js","utils/event.js","components/sw-update-popup/index.js","components/ProgressBar.js","hooks/useMedia.js","hooks/useLocalStorage.js","hooks/useDarkMode.js","components/header/index.js","components/Loading.js","utils/date.js","utils/dom.js","components/post-list/index.js","hooks/useArticles.js","hooks/useScrollHistory.js","views/Home.js","views/Post.js","views/About.js","hooks/useEventListener.js","utils/debounce.js","hooks/useScroll.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Button","props","children","onClick","className","prefixCls","size","push","styles","classNames","btn","this","map","eventType","fn","values","forEach","on","wrapFn","off","SWUpdatePoppup","useState","enable","setEnable","registration","setRegistration","useEffect","event","wrapper","content","waiting","navigator","serviceWorker","addEventListener","window","location","reload","postMessage","type","ProgressBar","useLocalStorage","key","initialValue","item","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","usePerfersDarkMode","queries","defaultValue","mediaQueryLists","q","matchMedia","getValue","index","findIndex","mql","matches","setValue","handler","addListener","removeListener","useMedia","Sidebar","enabledState","setEnabledState","prefersDarkMode","enabled","element","document","body","classList","add","remove","useDarkMode","enableDarkMode","duration","Date","getTime","total","Math","floor","header","logo","to","title","href","target","rel","aria-label","icon","join","Loading","isValidDate","date","isNaN","pad","data","tmpVal","Number","toString","getLocalYearMonthDay","d","year","getFullYear","month","getMonth","getDate","hour","getHours","minute","getMinutes","second","getSeconds","parseDatetime","List","posts","listItem","id","slug","createDate","dangerouslySetInnerHTML","__html","intro","useArticles","articles","useArticle","find","_","article","setArticle","historyMap","useScrollHistory","useLocation","documentElement","scrollTop","pathname","Home","filter","Post","useParams","Valine","el","appId","appKey","visitor","recordIP","path","useEventListener","eventName","savedHandler","useRef","current","eventListener","removeEventListener","delay","timer","clearTimeout","setTimeout","useScroll","debounce","BackToTop","position","getComputedStyle","scrollBehavior","requestAnimationFrame","callback","step","distance","nextScrollTop","max","min","abs","style","scrollSmoothTo","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","register","then","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","AV","require","ReactDOM","render","exact","component","About","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","checkValidServiceWorker","emit","e","preventDefault","promise","err"],"mappings":"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","file":"static/js/main.c7d0cb8c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"button_btn__SGdXd\",\"focus\":\"button_focus__cXJFm\",\"btn-lg\":\"button_btn-lg__3y_zH\",\"btn-sm\":\"button_btn-sm__TF0QD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"sw-update-popup_wrapper__kqnqb\",\"enable\":\"sw-update-popup_enable__1sSCl\",\"content\":\"sw-update-popup_content__nGfn0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"header_icon__2CeRL\",\"logo\":\"header_logo__1X7aW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"post-list_listItem__9cG2b\"};","import React from 'react'\nimport classNames from 'classnames'\nimport styles from './button.module.css'\n\nfunction Button (props) {\n  const { children, onClick, className, size } = props\n\n  const prefixCls = []\n\n  // large => lg\n  // small => sm\n  switch (size) {\n    case 'large':\n      prefixCls.push(styles['btn-lg'])\n      break;\n    case 'small':\n      prefixCls.push(styles['btn-sm'])\n      break;\n    default:\n      break;\n  }\n\n  return  (\n    <button\n      className={classNames(styles.btn, prefixCls, className)}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  )\n}\n\nexport default Button","class Event {\n  constructor () {\n    this.map = {}\n  }\n\n  on (eventType, fn) {\n    if (!eventType || typeof eventType !== 'string' || typeof fn !== 'function') return\n    if (!this.map[eventType]) {\n      this.map[eventType] = []\n    }\n    this.map[eventType].push(fn)\n  }\n\n  emit (eventType, ...values) {\n    if (!eventType || typeof eventType !== 'string') return\n    if (!this.map[eventType]) return\n\n    this.map[eventType].forEach(fn => fn(...values))\n  }\n\n  off (eventType, fn) {\n    if (!eventType || typeof eventType !== 'string' || typeof fn !== 'function') return\n    if (!this.map[eventType]) return\n\n    [fn, ...this.map[eventType]] = this.map[eventType]\n  }\n\n  once (eventType, fn) {\n    const wrapFn = (...values) => {\n      fn(...values)\n      this.off(eventType, wrapFn)\n    }\n    this.on(eventType, wrapFn)\n  }\n}\n\nexport default new Event()\n\n","import React, { useEffect, useState } from 'react'\nimport classNames from 'classnames'\nimport Button from 'components/button'\nimport event from 'utils/event'\nimport styles from './sw-update-popup.module.css'\n\nfunction SWUpdatePoppup () {\n\n  const [enable, setEnable] = useState(false)\n  const [registration, setRegistration] = useState(null)\n\n  useEffect(\n    () => {\n      event.on('sw-update', (registration) => {\n        setEnable(true)\n        setRegistration(registration)\n      })\n    },\n    []\n  )\n\n  function reload () {\n    if (!registration || !registration.waiting) return\n    navigator.serviceWorker.addEventListener('controllerchange', () => {\n      window.location.reload()\n    })\n    registration.waiting.postMessage({\n      type: 'SKIP_WAITING'\n    })\n  }\n\n  return (\n    <div className={classNames(styles.wrapper, {\n      [styles.enable]: enable\n    })}>\n      <div className={styles.content}>发现新内容!!</div>\n      <Button size='small' onClick={reload}>刷新</Button>\n    </div>\n  )\n}\n\nexport default SWUpdatePoppup","import React from 'react';\n\nexport default function ProgressBar () {\n  return (\n    <div className='progress-bar'>\n      <div className='bg-red'></div>\n      <div className='bg-orange'></div>\n      <div className='bg-yellow'></div>\n      <div className='bg-green'></div>\n      <div className='bg-blue'></div>\n      <div className='bg-indigo'></div>\n      <div className='bg-purple'></div>\n    </div>\n  )\n}","import { useState, useEffect } from 'react'\n\nexport default (queries, values, defaultValue) => {\n  const mediaQueryLists = queries.map(q => window.matchMedia(q))\n\n  const getValue = () => {\n    const index = mediaQueryLists.findIndex(mql => mql.matches)\n    return typeof values[index] !== 'undefined' ? values[index] : defaultValue\n  }\n\n  const [value, setValue] = useState(getValue)\n\n  useEffect(\n    () => {\n      const handler = () => setValue(getValue)\n      mediaQueryLists.forEach(mql => mql.addListener(handler))\n      return () => mediaQueryLists.forEach(mql => mql.removeListener(handler))\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  return value\n}","import { useState } from 'react'\n\nconst useLocalStorage = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.log(error)\n      return initialValue\n    }\n  })\n\n  const setValue = value => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import { useEffect } from 'react'\nimport useMedia from './useMedia'\nimport useLocalStorage from './useLocalStorage'\n\nfunction usePerfersDarkMode () {\n  return useMedia(['(prefers-color-scheme: dark'], [true], false)\n}\n\nexport default () => {\n  const [enabledState, setEnabledState] = useLocalStorage('dark-mode-enabled')\n\n  const prefersDarkMode = usePerfersDarkMode()\n\n  const enabled =\n    typeof enabledState !== 'undefined' ? enabledState : prefersDarkMode\n\n  useEffect(\n    () => {\n      const className = 'dark-mode'\n      const element = window.document.body\n      if (enabled) {\n        element.classList.add(className)\n      } else {\n        element.classList.remove(className)\n      }\n    },\n    [enabled]\n  )\n\n  return [enabled, setEnabledState]\n}\n","import React from 'react';\nimport {\n  Link,\n} from \"react-router-dom\";\nimport useDarkMode from 'hooks/useDarkMode'\nimport styles from './header.module.css'\n\nexport default function Sidebar () {\n  const [enabled, enableDarkMode] = useDarkMode()\n\n  const birthDay = 1583224596000\n  const now = new Date()\n  const duration = now.getTime() - birthDay\n  const total = Math.floor(duration / (1000 * 60 * 60 * 24));\n\n  return (\n    <div className={styles.header}>\n      <h1>\n        <Link className={styles.logo} to='/'>打开天眼看文章</Link>\n      </h1>\n      <p className='font-sm'>\n        <Link className='text-blue font-weight-bold' to='/about' title='about me'>@me |</Link>\n        <a className='text-green font-weight-bold' href='https://github.com/xiao555' title='github' target='_blank' rel='noopener noreferrer'>@github</a>\n      </p>\n      <p className='font-sm'>\n        <a href='mailto:zhangruiwu32@gmail.com'>zhangruiwu32@gmail.com</a>\n      </p>\n      <p><small>本站已存活 { total } 天</small></p>\n      <button className='border-0 px-0 mb-1' aria-label=\"Theme Color\" onClick={() => enableDarkMode(!enabled)}>\n        <span className={[enabled ? 'icon-sun' : 'icon-moon', styles.icon].join(' ')}></span>\n      </button>\n    </div>\n  )\n}","import React from 'react';\n\nfunction Loading() {\n  return (\n    <h1>Loading...</h1>\n  )\n}\n\nexport default Loading\n","function isValidDate (date) {\n  return date instanceof Date && !isNaN(date)\n}\n\nfunction pad(data) {\n  let tmpVal = Number(data)\n  if (tmpVal < 10) {\n    return '0' + tmpVal;\n  }\n  return tmpVal.toString();\n}\n\nfunction parseDatetime (value) {\n  if (!isValidDate(value)) return {}\n  return {\n    year: value.getFullYear(),\n    month: pad(value.getMonth() + 1), // 月份取值0-11\n    date: pad(value.getDate()),\n    hour: pad(value.getHours()),\n    minute: pad(value.getMinutes()),\n    second: pad(value.getSeconds())\n  }\n}\n\nexport function getLocalYearMonthDay (value) {\n  let d = new Date(value)\n  if (!isValidDate(d)) return value\n  const { year, month, date } = parseDatetime(d)\n  return `${year}-${month}-${date}`\n}","/**\n * 平滑滚动到指定位置\n * @param {Element} element - 平滑滚动的元素\n * @param {Number} position - 滚动到的位置\n */\nexport const scrollSmoothTo = (element, position) => {\n  if (typeof window.getComputedStyle(document.body).scrollBehavior === 'undefined') {\n    if (!window.requestAnimationFrame) {\n      window.requestAnimationFrame = function (callback, element) {\n        return setTimeout(callback, 17)\n      }\n    }\n    const step = () => {\n      const scrollTop = element.scrollTop\n      const distance = position - scrollTop\n      const nextScrollTop = scrollTop + (distance >= 0 ? Math.max(distance / 5, 1) : Math.min(distance / 5, -1))\n      if (Math.abs(position - scrollTop) <= 1) {\n        element.scrollTop = position\n      } else {\n        element.scrollTop = nextScrollTop\n        requestAnimationFrame(step)\n      }\n    }\n    step()\n  } else {\n    element.style.scrollBehavior = 'smooth'\n    element.scrollTop = position\n  }\n}\n","import React from 'react'\nimport { Link } from \"react-router-dom\"\nimport { getLocalYearMonthDay } from '../../utils'\nimport styles from './post-list.module.css'\n\nfunction List({ posts }) {\n  return (\n    posts.map(item =>\n      <article className={styles.listItem} key={item.id}>\n        <h2><Link to={`/post/${item.slug}`}>{ item.title }</Link></h2>\n        <p><small>{ getLocalYearMonthDay(item.createDate) }</small></p>\n        <p dangerouslySetInnerHTML={{ __html: item.intro }}></p>\n      </article>\n    )\n  )\n}\n\nexport default List\n","import { useState, useEffect } from 'react'\nimport articles from '../articles.json'\n\nconst useArticles = () => {\n  return { articles }\n}\n\nconst useArticle = (id) => {\n  const { articles } = useArticles()\n  const [article, setArticle] = useState(articles ? articles.find(_ => _.id === id) : null)\n\n  useEffect(() => {\n    if (articles) {\n      const item = articles.find(_ => _.id === id)\n      if (item) {\n        setArticle(item)\n      } else {\n        setArticle(null)\n      }\n    }\n  }, [articles, id])\n  return article\n}\n\nexport { useArticles, useArticle }","import { useEffect } from 'react'\nimport { useLocation } from \"react-router-dom\"\n\nlet historyMap = JSON.parse(window.localStorage.getItem('scroll-history')) || {}\n\nconst useScrollHistory = () => {\n  const location = useLocation()\n\n  useEffect(() => {\n    document.documentElement.scrollTop = historyMap[location.pathname] || 0\n    return () => {\n      const scrollTop = document.documentElement.scrollTop\n      historyMap[location.pathname] = scrollTop\n      window.localStorage.setItem('scroll-history', JSON.stringify(historyMap))\n    }\n  // 传入空数组，模拟componentDidMount，componentWillUnmount\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport { useScrollHistory }\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport PostList from '../components/post-list/index.js'\nimport { useArticles } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Home() {\n  const { articles } = useArticles()\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `首页 | 打开天眼看文章`\n  })\n\n  return (\n    articles\n      ? <div className='main-content'>\n          <PostList posts={articles.filter(item => item.id !== 'about-me')}/>\n        </div>\n      : <Loading />\n  )\n}\n\nexport default Home;\n","import React, { useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\nimport Valine from 'valine'\n\nfunction Post() {\n  const { id } = useParams()\n  const article = useArticle(id)\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `${article.title} | 打开天眼看文章`\n  })\n\n  useEffect(() => {\n    new Valine({\n      el:'#vcomments',\n      appId: '2VQxghv1P34UuWX18ynpOBhX-gzGzoHsz',\n      appKey: 'IUpu9P5iuaym0hGnWxogUvon',\n      visitor: true,\n      recordIP: true,\n      path: id\n    })\n  }, [id])\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p>\n            <small>{ getLocalYearMonthDay(article.createDate) }</small>\n            <span id={id} className='leancloud_visitors ml-1'><small>阅读量</small> <small className=\"leancloud-visitors-count\"></small></span>\n          </p>\n          <section dangerouslySetInnerHTML={{ __html: article.content }}></section>\n          <section id='vcomments'></section>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Post() {\n  const article = useArticle('about-me')\n\n  useEffect(() => {\n    document.title = `关于 | 打开天眼看文章`\n  })\n\n  useScrollHistory()\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p><small>{ getLocalYearMonthDay(article.createDate) }</small></p>\n          <p dangerouslySetInnerHTML={{ __html:article.content }}></p>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import { useRef, useEffect } from 'react'\n\nconst useEventListener = (eventName, handler, element = window) => {\n  const savedHandler = useRef()\n\n  useEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const isSupported = element && element.addEventListener\n    if (!isSupported) return\n\n    const eventListener = event => savedHandler.current(event)\n\n    element.addEventListener(eventName, eventListener)\n\n    return () => {\n      element.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element])\n}\n\n\nexport default useEventListener","export default (fn, delay) => {\n  let timer\n  return () => {\n    if (timer) clearTimeout(timer)\n    timer = setTimeout(fn, delay)\n  }\n}","import { useState } from 'react'\nimport  useEventListener from './useEventListener'\nimport debounce from 'utils/debounce'\n\nconst useScroll = (element = document.documentElement) => {\n  const [value, setValue] = useState(element.scrollTop)\n\n  const handler = () => {\n    setValue(element.scrollTop)\n  }\n\n  useEventListener('scroll', debounce(handler, 200))\n\n  return [value]\n}\n\nexport default useScroll","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport './App.css';\nimport SWUpdatePopup from 'components/sw-update-popup'\nimport ProgressBar from './components/ProgressBar'\nimport Header from './components/header'\nimport Home from './views/Home'\nimport Post from './views/Post'\nimport About from './views/About'\nimport useScroll from 'hooks/useScroll'\nimport { scrollSmoothTo } from './utils'\n\nfunction BackToTop ({scrollTop}) {\n  return (\n    <div className={['back-to-top', scrollTop > 800 ? 'show' : ''].join(' ')} onClick={() => scrollSmoothTo(document.documentElement, 0)}>\n      △\n    </div>\n  )\n}\n\nexport default function App() {\n  const [scrollTop] = useScroll()\n\n  return (\n    <Router>\n      <div className='app'>\n        <ProgressBar/>\n        <main className='main'>\n          <Header/>\n          <Switch>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/post/:id\" component={Post}/>\n            <Route path=\"/about\" component={About}/>\n          </Switch>\n        </main>\n        <BackToTop scrollTop={scrollTop}/>\n        <SWUpdatePopup />\n      </div>\n    </Router>\n  )\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'highlight.js/styles/dark.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport event from 'utils/event'\n// Register AV objects to the global\nwindow.AV = require('leancloud-storage');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n  onUpdate (registration) {\n    event.emit('sw-update', registration)\n  }\n});\n\nwindow.addEventListener('unhandledrejection', (e) => {\n  e.preventDefault()\n  e.promise.catch(err => console.log(err))\n})"],"sourceRoot":""}