{"version":3,"sources":["components/header/header.module.css","components/post-list/post-list.module.css","components/ProgressBar.js","hooks/useMedia.js","hooks/useLocalStorage.js","hooks/useDarkMode.js","components/header/index.js","components/Loading.js","utils/date.js","utils/dom.js","components/post-list/index.js","hooks/useArticles.js","hooks/useScrollHistory.js","views/Home.js","views/Post.js","views/About.js","hooks/useEventListener.js","utils/debounce.js","hooks/useScroll.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","ProgressBar","className","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","usePerfersDarkMode","queries","values","defaultValue","mediaQueryLists","map","q","matchMedia","getValue","index","findIndex","mql","matches","setValue","useEffect","handler","forEach","addListener","removeListener","useMedia","Sidebar","enabledState","setEnabledState","prefersDarkMode","enabled","element","document","body","classList","add","remove","useDarkMode","enableDarkMode","duration","Date","getTime","total","Math","floor","styles","header","logo","to","title","href","target","rel","aria-label","onClick","icon","join","Loading","isValidDate","date","isNaN","pad","data","tmpVal","Number","toString","getLocalYearMonthDay","d","year","getFullYear","month","getMonth","getDate","hour","getHours","minute","getMinutes","second","getSeconds","parseDatetime","List","posts","listItem","id","slug","createDate","dangerouslySetInnerHTML","__html","intro","useArticles","articles","useArticle","find","_","article","setArticle","historyMap","useScrollHistory","location","useLocation","documentElement","scrollTop","pathname","Home","filter","Post","useParams","Valine","el","appId","appKey","visitor","recordIP","path","content","useEventListener","eventName","savedHandler","useRef","current","addEventListener","eventListener","event","removeEventListener","fn","delay","timer","clearTimeout","setTimeout","useScroll","debounce","BackToTop","position","getComputedStyle","scrollBehavior","requestAnimationFrame","callback","step","distance","nextScrollTop","max","min","abs","style","scrollSmoothTo","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","AV","require","ReactDOM","render","exact","component","About","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","e","preventDefault","promise","err"],"mappings":"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","file":"static/js/main.f795e480.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"header_icon__2CeRL\",\"logo\":\"header_logo__1X7aW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"post-list_listItem__9cG2b\"};","import React from 'react';\n\nexport default function ProgressBar () {\n  return (\n    <div className='progress-bar'>\n      <div className='bg-red'></div>\n      <div className='bg-orange'></div>\n      <div className='bg-yellow'></div>\n      <div className='bg-green'></div>\n      <div className='bg-blue'></div>\n      <div className='bg-indigo'></div>\n      <div className='bg-purple'></div>\n    </div>\n  )\n}","import { useState, useEffect } from 'react'\n\nexport default (queries, values, defaultValue) => {\n  const mediaQueryLists = queries.map(q => window.matchMedia(q))\n\n  const getValue = () => {\n    const index = mediaQueryLists.findIndex(mql => mql.matches)\n    return typeof values[index] !== 'undefined' ? values[index] : defaultValue\n  }\n\n  const [value, setValue] = useState(getValue)\n\n  useEffect(\n    () => {\n      const handler = () => setValue(getValue)\n      mediaQueryLists.forEach(mql => mql.addListener(handler))\n      return () => mediaQueryLists.forEach(mql => mql.removeListener(handler))\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  return value\n}","import { useState } from 'react'\n\nconst useLocalStorage = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.log(error)\n      return initialValue\n    }\n  })\n\n  const setValue = value => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import { useEffect } from 'react'\nimport useMedia from './useMedia'\nimport useLocalStorage from './useLocalStorage'\n\nfunction usePerfersDarkMode () {\n  return useMedia(['(prefers-color-scheme: dark'], [true], false)\n}\n\nexport default () => {\n  const [enabledState, setEnabledState] = useLocalStorage('dark-mode-enabled')\n\n  const prefersDarkMode = usePerfersDarkMode()\n\n  const enabled =\n    typeof enabledState !== 'undefined' ? enabledState : prefersDarkMode\n\n  useEffect(\n    () => {\n      const className = 'dark-mode'\n      const element = window.document.body\n      if (enabled) {\n        element.classList.add(className)\n      } else {\n        element.classList.remove(className)\n      }\n    },\n    [enabled]\n  )\n\n  return [enabled, setEnabledState]\n}\n","import React from 'react';\nimport {\n  Link,\n} from \"react-router-dom\";\nimport useDarkMode from 'hooks/useDarkMode'\nimport styles from './header.module.css'\n\nexport default function Sidebar () {\n  const [enabled, enableDarkMode] = useDarkMode()\n\n  const birthDay = 1583224596000\n  const now = new Date()\n  const duration = now.getTime() - birthDay\n  const total = Math.floor(duration / (1000 * 60 * 60 * 24));\n\n  return (\n    <div className={styles.header}>\n      <h1>\n        <Link className={styles.logo} to='/'>打开天眼看文章</Link>\n      </h1>\n      <p className='font-sm'>\n        <Link className='text-blue font-weight-bold' to='/about' title='about me'>@me |</Link>\n        <a className='text-green font-weight-bold' href='https://github.com/xiao555' title='github' target='_blank' rel='noopener noreferrer'>@github</a>\n      </p>\n      <p className='font-sm'>\n        <a href='mailto:zhangruiwu32@gmail.com'>zhangruiwu32@gmail.com</a>\n      </p>\n      <p><small>本站已存活 { total } 天</small></p>\n      <button className='border-0 px-0 mb-1' aria-label=\"Theme Color\" onClick={() => enableDarkMode(!enabled)}>\n        <span className={[enabled ? 'icon-sun' : 'icon-moon', styles.icon].join(' ')}></span>\n      </button>\n    </div>\n  )\n}","import React from 'react';\n\nfunction Loading() {\n  return (\n    <h1>Loading...</h1>\n  )\n}\n\nexport default Loading\n","function isValidDate (date) {\n  return date instanceof Date && !isNaN(date)\n}\n\nfunction pad(data) {\n  let tmpVal = Number(data)\n  if (tmpVal < 10) {\n    return '0' + tmpVal;\n  }\n  return tmpVal.toString();\n}\n\nfunction parseDatetime (value) {\n  if (!isValidDate(value)) return {}\n  return {\n    year: value.getFullYear(),\n    month: pad(value.getMonth() + 1), // 月份取值0-11\n    date: pad(value.getDate()),\n    hour: pad(value.getHours()),\n    minute: pad(value.getMinutes()),\n    second: pad(value.getSeconds())\n  }\n}\n\nexport function getLocalYearMonthDay (value) {\n  let d = new Date(value)\n  if (!isValidDate(d)) return value\n  const { year, month, date } = parseDatetime(d)\n  return `${year}-${month}-${date}`\n}","/**\n * 平滑滚动到指定位置\n * @param {Element} element - 平滑滚动的元素\n * @param {Number} position - 滚动到的位置\n */\nexport const scrollSmoothTo = (element, position) => {\n  if (typeof window.getComputedStyle(document.body).scrollBehavior === 'undefined') {\n    if (!window.requestAnimationFrame) {\n      window.requestAnimationFrame = function (callback, element) {\n        return setTimeout(callback, 17)\n      }\n    }\n    const step = () => {\n      const scrollTop = element.scrollTop\n      const distance = position - scrollTop\n      const nextScrollTop = scrollTop + (distance >= 0 ? Math.max(distance / 5, 1) : Math.min(distance / 5, -1))\n      if (Math.abs(position - scrollTop) <= 1) {\n        element.scrollTop = position\n      } else {\n        element.scrollTop = nextScrollTop\n        requestAnimationFrame(step)\n      }\n    }\n    step()\n  } else {\n    element.style.scrollBehavior = 'smooth'\n    element.scrollTop = position\n  }\n}\n","import React from 'react'\nimport { Link } from \"react-router-dom\"\nimport { getLocalYearMonthDay } from '../../utils'\nimport styles from './post-list.module.css'\n\nfunction List({ posts }) {\n  return (\n    posts.map(item =>\n      <article className={styles.listItem} key={item.id}>\n        <h2><Link to={`/post/${item.slug}`}>{ item.title }</Link></h2>\n        <p><small>{ getLocalYearMonthDay(item.createDate) }</small></p>\n        <p dangerouslySetInnerHTML={{ __html: item.intro }}></p>\n      </article>\n    )\n  )\n}\n\nexport default List\n","import { useState, useEffect } from 'react'\nimport articles from '../articles.json'\n\nconst useArticles = () => {\n  return { articles }\n}\n\nconst useArticle = (id) => {\n  const { articles } = useArticles()\n  const [article, setArticle] = useState(articles ? articles.find(_ => _.id === id) : null)\n\n  useEffect(() => {\n    if (articles) {\n      const item = articles.find(_ => _.id === id)\n      if (item) {\n        setArticle(item)\n      } else {\n        setArticle(null)\n      }\n    }\n  }, [articles, id])\n  return article\n}\n\nexport { useArticles, useArticle }","import { useEffect } from 'react'\nimport { useLocation } from \"react-router-dom\"\n\nlet historyMap = JSON.parse(window.localStorage.getItem('scroll-history')) || {}\n\nconst useScrollHistory = () => {\n  const location = useLocation()\n\n  useEffect(() => {\n    document.documentElement.scrollTop = historyMap[location.pathname] || 0\n    return () => {\n      const scrollTop = document.documentElement.scrollTop\n      historyMap[location.pathname] = scrollTop\n      window.localStorage.setItem('scroll-history', JSON.stringify(historyMap))\n    }\n  // 传入空数组，模拟componentDidMount，componentWillUnmount\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport { useScrollHistory }\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport PostList from '../components/post-list/index.js'\nimport { useArticles } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Home() {\n  const { articles } = useArticles()\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `首页 | 打开天眼看文章`\n  })\n\n  return (\n    articles\n      ? <div className='main-content'>\n          <PostList posts={articles.filter(item => item.id !== 'about-me')}/>\n        </div>\n      : <Loading />\n  )\n}\n\nexport default Home;\n","import React, { useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\nimport Valine from 'valine'\n\nfunction Post() {\n  const { id } = useParams()\n  const article = useArticle(id)\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `${article.title} | 打开天眼看文章`\n  })\n\n  useEffect(() => {\n    new Valine({\n      el:'#vcomments',\n      appId: '2VQxghv1P34UuWX18ynpOBhX-gzGzoHsz',\n      appKey: 'IUpu9P5iuaym0hGnWxogUvon',\n      visitor: true,\n      recordIP: true,\n      path: id\n    })\n  }, [id])\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p>\n            <small>{ getLocalYearMonthDay(article.createDate) }</small>\n            <span id={id} className='leancloud_visitors ml-1'><small>阅读量</small> <small className=\"leancloud-visitors-count\"></small></span>\n          </p>\n          <section dangerouslySetInnerHTML={{ __html: article.content }}></section>\n          <section id='vcomments'></section>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Post() {\n  const article = useArticle('about-me')\n\n  useEffect(() => {\n    document.title = `关于 | 打开天眼看文章`\n  })\n\n  useScrollHistory()\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p><small>{ getLocalYearMonthDay(article.createDate) }</small></p>\n          <p dangerouslySetInnerHTML={{ __html:article.content }}></p>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import { useRef, useEffect } from 'react'\n\nconst useEventListener = (eventName, handler, element = window) => {\n  const savedHandler = useRef()\n\n  useEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const isSupported = element && element.addEventListener\n    if (!isSupported) return\n\n    const eventListener = event => savedHandler.current(event)\n\n    element.addEventListener(eventName, eventListener)\n\n    return () => {\n      element.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element])\n}\n\n\nexport default useEventListener","export default (fn, delay) => {\n  let timer\n  return () => {\n    if (timer) clearTimeout(timer)\n    timer = setTimeout(fn, delay)\n  }\n}","import { useState } from 'react'\nimport  useEventListener from './useEventListener'\nimport debounce from 'utils/debounce'\n\nconst useScroll = (element = document.documentElement) => {\n  const [value, setValue] = useState(element.scrollTop)\n\n  const handler = () => {\n    setValue(element.scrollTop)\n  }\n\n  useEventListener('scroll', debounce(handler, 200))\n\n  return [value]\n}\n\nexport default useScroll","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport './App.css';\nimport ProgressBar from './components/ProgressBar'\nimport Header from './components/header'\nimport Home from './views/Home'\nimport Post from './views/Post'\nimport About from './views/About'\nimport useScroll from 'hooks/useScroll'\nimport { scrollSmoothTo } from './utils'\n\nfunction BackToTop ({scrollTop}) {\n  return (\n    <div className={['back-to-top', scrollTop > 800 ? 'show' : ''].join(' ')} onClick={() => scrollSmoothTo(document.documentElement, 0)}>\n      △\n    </div>\n  )\n}\n\nexport default function App() {\n  const [scrollTop] = useScroll()\n\n  return (\n    <Router>\n      <div className='app'>\n        <ProgressBar/>\n        <main className='main'>\n          <Header/>\n          <Switch>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/post/:id\" component={Post}/>\n            <Route path=\"/about\" component={About}/>\n          </Switch>\n        </main>\n        <BackToTop scrollTop={scrollTop}/>\n      </div>\n    </Router>\n  )\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'highlight.js/styles/dark.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n// Register AV objects to the global\nwindow.AV = require('leancloud-storage');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n\nwindow.addEventListener('unhandledrejection', (e) => {\n  e.preventDefault()\n  e.promise.catch(err => console.log(err))\n})"],"sourceRoot":""}