<!DOCTYPE html><html lang="zh-hans"><head><meta charset="utf-8"><link rel="icon" href="/favicon_64x64.ico" sizes="64x64"><link rel="canonical" href="https://xiao555.club"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="theme-color" content="#000000"><meta name="description" content="Web site created using create-react-app"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="打开天眼看文章"><link rel="apple-touch-icon" href="favicon_64x64.ico" sizes="64x64"><link rel="manifest" href="/manifest.json"><title>JavaScript 笔记 | 打开天眼看文章</title><link href="/static/css/2.5bcfae4a.chunk.css" rel="stylesheet"><link href="/static/css/main.96acf59d.chunk.css" rel="stylesheet"><style type="text/css">.v[data-class=v]{font-size:16px;text-align:left}.v[data-class=v] *{-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.75}.v[data-class=v] .status-bar,.v[data-class=v] .veditor,.v[data-class=v] .vinput,.v[data-class=v] p,.v[data-class=v] pre code{color:#555}.v[data-class=v] .vsys,.v[data-class=v] .vtime{color:#b3b3b3}.v[data-class=v] .text-right{text-align:right}.v[data-class=v] .text-center{text-align:center}.v[data-class=v] img{max-width:100%;border:none}.v[data-class=v] hr{margin:.825em 0;border-color:#f6f6f6;border-style:dashed}.v[data-class=v].hide-avatar .vimg{display:none}.v[data-class=v] a{position:relative;cursor:pointer;color:#1abc9c;text-decoration:none;display:inline-block}.v[data-class=v] a:hover{color:#d7191a}.v[data-class=v] code,.v[data-class=v] pre{background-color:#f8f8f8;padding:.2em .4em;border-radius:3px;font-size:85%;margin:0}.v[data-class=v] pre{padding:10px;overflow:auto;line-height:1.45}.v[data-class=v] pre code{padding:0;background:transparent;white-space:pre-wrap;word-break:keep-all}.v[data-class=v] blockquote{color:#666;margin:.5em 0;padding:0 0 0 1em;border-left:8px solid hsla(0,0%,93%,.5)}.v[data-class=v] .vinput{border:none;resize:none;outline:none;padding:10px 5px;max-width:100%;font-size:.775em}.v[data-class=v] input[type=checkbox],.v[data-class=v] input[type=radio]{display:inline-block;vertical-align:middle;margin-top:-2px}.v[data-class=v] .vicon{cursor:pointer;display:inline-block;overflow:hidden;fill:#555;vertical-align:middle}.v[data-class=v] .vicon+.vicon{margin-left:10px}.v[data-class=v] .vicon.actived{fill:#66b1ff}.v[data-class=v] .vrow{font-size:0;padding:10px 0}.v[data-class=v] .vrow .vcol{display:inline-block;vertical-align:middle;font-size:14px}.v[data-class=v] .vrow .vcol.vcol-20{width:20%}.v[data-class=v] .vrow .vcol.vcol-30{width:30%}.v[data-class=v] .vrow .vcol.vcol-40{width:40%}.v[data-class=v] .vrow .vcol.vcol-50{width:50%}.v[data-class=v] .vrow .vcol.vcol-60{width:60%}.v[data-class=v] .vrow .vcol.vcol-70{width:70%}.v[data-class=v] .vrow .vcol.vcol-80{width:80%}.v[data-class=v] .vrow .vcol.vctrl{font-size:12px}.v[data-class=v] .emoji,.v[data-class=v] .vemoji{max-width:25px;vertical-align:middle;margin:0 1px;display:inline-block}.v[data-class=v] .vwrap{border:1px solid #f0f0f0;border-radius:4px;margin-bottom:10px;overflow:hidden;position:relative;padding:10px}.v[data-class=v] .vwrap input{background:transparent}.v[data-class=v] .vwrap .vedit{position:relative;padding-top:10px}.v[data-class=v] .vwrap .cancel-reply-btn{position:absolute;right:5px;top:5px;cursor:pointer}.v[data-class=v] .vwrap .vemojis{display:none;font-size:18px;max-height:145px;overflow:auto;padding-bottom:10px;-webkit-box-shadow:0 0 1px #f0f0f0;box-shadow:0 0 1px #f0f0f0}.v[data-class=v] .vwrap .vemojis i{font-style:normal;padding-top:7px;width:36px;cursor:pointer;text-align:center;display:inline-block;vertical-align:middle}.v[data-class=v] .vwrap .vpreview{padding:7px;-webkit-box-shadow:0 0 1px #f0f0f0;box-shadow:0 0 1px #f0f0f0}.v[data-class=v] .vwrap .vheader .vinput{width:33.33%;border-bottom:1px dashed #dedede}.v[data-class=v] .vwrap .vheader.item2 .vinput{width:50%}.v[data-class=v] .vwrap .vheader.item1 .vinput{width:100%}.v[data-class=v] .vwrap .vheader .vinput:focus{border-bottom-color:#eb5055}@media screen and (max-width:520px){.v[data-class=v] .vwrap .vheader.item2 .vinput,.v[data-class=v] .vwrap .vheader .vinput{width:100%}}.v[data-class=v] .vpower{color:#999;font-size:.75em;padding:.5em 0}.v[data-class=v] .vpower a{font-size:.75em}.v[data-class=v] .vcount{padding:5px;font-weight:600;font-size:1.25em}.v[data-class=v] ol,.v[data-class=v] ul{padding:0;margin-left:1.25em}.v[data-class=v] .txt-center{text-align:center}.v[data-class=v] .txt-right{text-align:right}.v[data-class=v] .pd5{padding:5px}.v[data-class=v] .pd10{padding:10px}.v[data-class=v] .veditor{width:100%;min-height:8.75em;font-size:.875em;background:transparent;resize:vertical;-webkit-transition:all .25s ease;transition:all .25s ease}.v[data-class=v] .vbtn{-webkit-transition-duration:.4s;transition-duration:.4s;text-align:center;color:#555;border:1px solid #ededed;border-radius:.3em;display:inline-block;background:transparent;margin-bottom:0;font-weight:400;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;white-space:nowrap;padding:.5em 1.25em;font-size:.875em;line-height:1.42857143;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none}.v[data-class=v] .vbtn+.vbtn{margin-left:1.25em}.v[data-class=v] .vbtn:active,.v[data-class=v] .vbtn:hover{color:#3090e4;border-color:#3090e4}.v[data-class=v] .vbtn:disabled{border-color:#e1e1e1;color:#e1e1e1;background-color:#fdfafa;cursor:not-allowed}.v[data-class=v] .vempty{padding:1.25em;text-align:center;color:#555;overflow:auto}.v[data-class=v] .vsys{display:inline-block;padding:.2em .5em;font-size:.75em;border-radius:.2em;margin-right:.3em}@media screen and (max-width:520px){.v[data-class=v] .vsys{display:none}}.v[data-class=v] .vcards{width:100%}.v[data-class=v] .vcards .vcard{padding-top:1.25em;position:relative;display:block}.v[data-class=v] .vcards .vcard:after{content:"";clear:both;display:block}.v[data-class=v] .vcards .vcard .vimg{width:3.125em;height:3.125em;float:left;border-radius:50%;margin-right:.7525em;border:1px solid #f5f5f5;padding:.125em}@media screen and (max-width:720px){.v[data-class=v] .vcards .vcard .vimg{width:2.5em;height:2.5em}}.v[data-class=v] .vcards .vcard .vhead{line-height:1.5;margin-top:0}.v[data-class=v] .vcards .vcard .vhead .vnick{position:relative;font-size:.875em;font-weight:500;margin-right:.875em;cursor:pointer;text-decoration:none;display:inline-block}.v[data-class=v] .vcards .vcard .vhead .vnick:hover{color:#d7191a}.v[data-class=v] .vcards .vcard .vh{overflow:hidden;padding-bottom:.5em;border-bottom:1px dashed #f5f5f5}.v[data-class=v] .vcards .vcard .vh .vtime{font-size:.75em;margin-right:.875em}.v[data-class=v] .vcards .vcard .vh .vmeta{line-height:1;position:relative}.v[data-class=v] .vcards .vcard .vh .vmeta .vat{font-size:.8125em;color:#ef2f11;cursor:pointer;float:right}.v[data-class=v] .vcards .vcard:last-child .vh{border-bottom:none}.v[data-class=v] .vcards .vcard .vcontent{word-wrap:break-word;word-break:break-all;font-size:.875em;line-height:2;position:relative;margin-bottom:.75em;padding-top:.625em}.v[data-class=v] .vcards .vcard .vcontent.expand{cursor:pointer;max-height:8em;overflow:hidden}.v[data-class=v] .vcards .vcard .vcontent.expand:before{display:block;content:"";position:absolute;width:100%;left:0;top:0;bottom:3.15em;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,0)),to(hsla(0,0%,100%,.9)));background:linear-gradient(180deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.9));z-index:999}.v[data-class=v] .vcards .vcard .vcontent.expand:after{display:block;content:attr(data-expand);text-align:center;color:#828586;position:absolute;width:100%;height:3.15em;line-height:3.15em;left:0;bottom:0;z-index:999;background:hsla(0,0%,100%,.9)}.v[data-class=v] .vcards .vcard .vquote{padding-left:1em;border-left:1px dashed hsla(0,0%,93%,.5)}.v[data-class=v] .vcards .vcard .vquote .vimg{width:2.225em;height:2.225em}.v[data-class=v] .vpage .vmore{margin:1em 0}.v[data-class=v] .clear{content:"";display:block;clear:both}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes pulse{50%{background:#dcdcdc}}@keyframes pulse{50%{background:#dcdcdc}}.v[data-class=v] .vspinner{width:22px;height:22px;display:inline-block;border:6px double #a0a0a0;border-top-color:transparent;border-bottom-color:transparent;border-radius:50%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear;position:relative;vertical-align:middle;margin:0 5px}.dark .v[data-class=v] .status-bar,.dark .v[data-class=v] .veditor,.dark .v[data-class=v] .vinput,.dark .v[data-class=v] p,.dark .v[data-class=v] pre code,.night .v[data-class=v] .status-bar,.night .v[data-class=v] .veditor,.night .v[data-class=v] .vinput,.night .v[data-class=v] p,.night .v[data-class=v] pre code,.theme__dark .v[data-class=v] .status-bar,.theme__dark .v[data-class=v] .veditor,.theme__dark .v[data-class=v] .vinput,.theme__dark .v[data-class=v] p,.theme__dark .v[data-class=v] pre code,[data-theme=dark] .v[data-class=v] .status-bar,[data-theme=dark] .v[data-class=v] .veditor,[data-theme=dark] .v[data-class=v] .vinput,[data-theme=dark] .v[data-class=v] p,[data-theme=dark] .v[data-class=v] pre code{color:#b2b2b5}.dark .v[data-class=v] .vsys,.dark .v[data-class=v] .vtime,.night .v[data-class=v] .vsys,.night .v[data-class=v] .vtime,.theme__dark .v[data-class=v] .vsys,.theme__dark .v[data-class=v] .vtime,[data-theme=dark] .v[data-class=v] .vsys,[data-theme=dark] .v[data-class=v] .vtime{color:#929298}.dark .v[data-class=v] code,.dark .v[data-class=v] pre,.dark .v[data-class=v] pre code,.night .v[data-class=v] code,.night .v[data-class=v] pre,.night .v[data-class=v] pre code,.theme__dark .v[data-class=v] code,.theme__dark .v[data-class=v] pre,.theme__dark .v[data-class=v] pre code,[data-theme=dark] .v[data-class=v] code,[data-theme=dark] .v[data-class=v] pre,[data-theme=dark] .v[data-class=v] pre code{color:#929298;background-color:#151414}.dark .v[data-class=v] .vwrap,.night .v[data-class=v] .vwrap,.theme__dark .v[data-class=v] .vwrap,[data-theme=dark] .v[data-class=v] .vwrap{border-color:#b2b2b5}.dark .v[data-class=v] .vicon,.night .v[data-class=v] .vicon,.theme__dark .v[data-class=v] .vicon,[data-theme=dark] .v[data-class=v] .vicon{fill:#b2b2b5}.dark .v[data-class=v] .vicon.actived,.night .v[data-class=v] .vicon.actived,.theme__dark .v[data-class=v] .vicon.actived,[data-theme=dark] .v[data-class=v] .vicon.actived{fill:#66b1ff}.dark .v[data-class=v] .vbtn,.night .v[data-class=v] .vbtn,.theme__dark .v[data-class=v] .vbtn,[data-theme=dark] .v[data-class=v] .vbtn{color:#b2b2b5;border-color:#b2b2b5}.dark .v[data-class=v] .vbtn:hover,.night .v[data-class=v] .vbtn:hover,.theme__dark .v[data-class=v] .vbtn:hover,[data-theme=dark] .v[data-class=v] .vbtn:hover{color:#66b1ff;border-color:#66b1ff}.dark .v[data-class=v] a:hover,.night .v[data-class=v] a:hover,.theme__dark .v[data-class=v] a:hover,[data-theme=dark] .v[data-class=v] a:hover{color:#d7191a}.dark .v[data-class=v] .vcards .vcard .vcontent.expand:before,.night .v[data-class=v] .vcards .vcard .vcontent.expand:before,.theme__dark .v[data-class=v] .vcards .vcard .vcontent.expand:before,[data-theme=dark] .v[data-class=v] .vcards .vcard .vcontent.expand:before{background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.3)),to(rgba(0,0,0,.7)));background:linear-gradient(180deg,rgba(0,0,0,.3),rgba(0,0,0,.7))}.dark .v[data-class=v] .vcards .vcard .vcontent.expand:after,.night .v[data-class=v] .vcards .vcard .vcontent.expand:after,.theme__dark .v[data-class=v] .vcards .vcard .vcontent.expand:after,[data-theme=dark] .v[data-class=v] .vcards .vcard .vcontent.expand:after{background:rgba(0,0,0,.7)}@media (prefers-color-scheme:dark){.v[data-class=v] .status-bar,.v[data-class=v] .veditor,.v[data-class=v] .vinput,.v[data-class=v] p,.v[data-class=v] pre code{color:#b2b2b5}.v[data-class=v] .vsys,.v[data-class=v] .vtime{color:#929298}.v[data-class=v] code,.v[data-class=v] pre,.v[data-class=v] pre code{color:#929298;background-color:#151414}.v[data-class=v] .vwrap{border-color:#b2b2b5}.v[data-class=v] .vicon{fill:#b2b2b5}.v[data-class=v] .vicon.actived{fill:#66b1ff}.v[data-class=v] .vbtn{color:#b2b2b5;border-color:#b2b2b5}.v[data-class=v] .vbtn:hover{color:#66b1ff;border-color:#66b1ff}.v[data-class=v] a:hover{color:#d7191a}.v[data-class=v] .vcards .vcard .vcontent.expand:before{background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.3)),to(rgba(0,0,0,.7)));background:linear-gradient(180deg,rgba(0,0,0,.3),rgba(0,0,0,.7))}.v[data-class=v] .vcards .vcard .vcontent.expand:after{background:rgba(0,0,0,.7)}}</style></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="app"><div class="progress-bar"><div class="bg-red"></div><div class="bg-orange"></div><div class="bg-yellow"></div><div class="bg-green"></div><div class="bg-blue"></div><div class="bg-indigo"></div><div class="bg-purple"></div></div><main class="main"><div><h1><a class="header_logo__1X7aW" href="/">打开天眼看文章</a></h1><p class="font-sm"><a class="text-blue font-weight-bold" title="about me" href="/about">@me |</a><a class="text-green font-weight-bold" href="https://github.com/xiao555" title="github" target="_blank" rel="noopener noreferrer">@github</a></p><p class="font-sm"><a href="mailto:zhangruiwu32@gmail.com">zhangruiwu32@gmail.com</a></p><p><small>本站已存活 186 天</small></p><button class="border-0 px-0 mb-1" aria-label="Theme Color"><span class="icon-moon header_icon__2CeRL"></span></button></div><article class="main-content"><h2>JavaScript 笔记</h2><p><small>2017-09-06</small><span id="javascript-note" class="leancloud_visitors ml-1"><small>阅读量</small> <small class="leancloud-visitors-count"></small></span></p><section><h3 id="1-对象字面量解析">1. 对象字面量解析</h3>
<pre><code class="language-javascript">({<span class="hljs-attribute">a</span>: <span class="hljs-number">1</span>}<span class="hljs-selector-class">.a</span>)
({<span class="hljs-attribute">a</span>: <span class="hljs-number">1</span>})<span class="hljs-selector-class">.a</span></code></pre>
<p>声明对象字面值时，语句开头不应该用{，因为js解释器会认为这是语句块（block）的开始。</p>
<h3 id="2-数字的点操作符">2. 数字的点操作符</h3>
<pre><code class="language-javascript">(<span class="hljs-number">1</span>).<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span> <span class="hljs-comment">// "1"</span>
<span class="hljs-number">1.</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>
<span class="hljs-number">1</span> .<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span></code></pre>
<p>js解释器会把数字后的.当做小数点而不是点操作符。</p>
<h3 id="3--连等赋值">3.  连等赋值</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> a = {n: <span class="hljs-number">1</span>};
<span class="hljs-keyword">var</span> b = a;
a.<span class="hljs-symbol">x</span> = a = {n: <span class="hljs-number">2</span>};
console.log(a.<span class="hljs-symbol">x</span>);<span class="hljs-comment">// --&gt; undefined</span>
console.log(b.<span class="hljs-symbol">x</span>);<span class="hljs-comment">// --&gt; {n:2}</span></code></pre>
<p><a href="http://justjavac.com/javascript/2012/04/05/javascript-continuous-assignment-operator.html">写了 10 年 Javascript 未必全了解的连续赋值运算</a>
<code>a.x = a = {n:2}</code>后，b.x检测到了 a.x 指向的 <code>a = { n: 2 }</code>的引用，然后由于 a 重新赋值后，b 和 a的引用断裂了，所以 b 的值是 <code>{ n: 1, x: a }</code>, 赋值后的 a 已经没有 x 了， 所以 a.x 是 undefined。</p>
<h3 id="4-逗号操作符">4. 逗号操作符</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">20</span>;
<span class="hljs-keyword">var</span> temp = {
    x: <span class="hljs-number">40</span>,
    foo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.x;
    }
};
(temp.foo)(); <span class="hljs-comment">// 40</span>
(temp.foo, temp.foo)(); <span class="hljs-comment">// 20，而不是40</span>

<span class="hljs-keyword">var</span> f = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>; }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">g</span><span class="hljs-params">()</span></span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>; })();

<span class="hljs-keyword">typeof</span> f; <span class="hljs-comment">// "number"</span></code></pre>
<p>逗号操作符会从左到右计算它的操作数，返回最后一个操作数的值。所以<code>(temp.foo, temp.foo)();</code>等价于<code>var fun = temp.foo; fun();，</code> fun调用时this指向window，所以返回20。</p>
<h3 id="5--parseint传入数字">5.  parseInt传入数字</h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-title">parseInt</span><span class="hljs-params">(<span class="hljs-number">0.000008</span>)</span></span> <span class="hljs-comment">// &gt;&gt; 0</span>
<span class="hljs-function"><span class="hljs-title">parseInt</span><span class="hljs-params">(<span class="hljs-number">0.0000008</span>)</span></span> <span class="hljs-comment">// &gt;&gt; 8</span></code></pre>
<p>parseInt(arg)时会调用arg.toString()。</p>
<pre><code class="language-javascript"><span class="hljs-params">(0.000008)</span><span class="hljs-string">.toString</span><span class="hljs-params">()</span> <span class="hljs-string">//</span> <span class="hljs-string">"0.000008"</span>
<span class="hljs-params">(0.0000008)</span><span class="hljs-string">.toString</span><span class="hljs-params">()</span> <span class="hljs-string">//</span> <span class="hljs-string">"8e-7"</span></code></pre>
<h3 id="6-利用给定接口获得闭包内部对象">6. 利用给定接口获得闭包内部对象</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> o = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> person = {
        name: <span class="hljs-string">'Vincent'</span>,
        age: <span class="hljs-number">24</span>,
    };
    <span class="hljs-keyword">return</span> {
        run: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(k)</span> </span>{
            <span class="hljs-keyword">return</span> person[k];
        },
    }
}());</code></pre>
<p>在不改变上面的代码情况下， 怎么得到原有的 person 对象？</p>
<pre><code class="language-javascript"><span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-built_in">Object</span>.prototype, <span class="hljs-string">'self'</span>, {
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;},
    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>},
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
    <span class="hljs-comment">// 该属性的存在是确保该属性可被delete方法删除</span>
});

<span class="hljs-keyword">var</span> person = o.run(<span class="hljs-string">'self'</span>);
<span class="hljs-keyword">delete</span> <span class="hljs-built_in">Object</span>.prototype.self;
<span class="hljs-comment">//由于不推荐使用prototype来扩展自己定义的属性（扩展标准规定的除外），这里把扩展再去掉。</span>

<span class="hljs-comment">// 其他思路</span>
person = [<span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>].reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj,k</span>)</span>{ obj[k] = o.run(k); <span class="hljs-keyword">return</span> obj }, {})</code></pre>
<h3 id="7-位操作符">7. 位操作符</h3>
<p>实现浮点数转整数，或者说取出数字的整数部分。比如-12.921 --&gt; -12，12.921 --&gt; 12等等。</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertToInt</span>(<span class="hljs-params">num</span>) </span>{
      <span class="hljs-keyword">return</span> num &gt;&gt; <span class="hljs-number">0</span>;
}
convertToInt(-Math.<span class="hljs-literal">PI</span>); <span class="hljs-comment">// -3</span>
convertToInt(<span class="hljs-number">12.921</span>); <span class="hljs-comment">// 12</span></code></pre>
<p>有符号右移&gt;&gt;
<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">按位操作符
</a></p>
<h3 id="8-functionprototypecallapply-的-this-问题">8. Function.prototype.call/apply 的 this 问题</h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nsm</span>(<span class="hljs-params"></span>) </span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>);}
nsm(); <span class="hljs-comment">// Window{top: xxxx}</span>
nsm.call(<span class="hljs-literal">null</span>/<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// Window{top: xxxx}</span>
nsm.call(<span class="hljs-number">1</span>); <span class="hljs-comment">// Number {[[PrimitiveValue]]: 1}</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sm</span>(<span class="hljs-params"></span>) </span>{<span class="hljs-string">'use strict'</span>; <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>);}
sm(); <span class="hljs-comment">// undefined</span>
sm.call(<span class="hljs-literal">null</span>); <span class="hljs-comment">// null</span>
sm.call(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// undefined</span>
sm.call(<span class="hljs-number">1</span>); <span class="hljs-comment">// 1</span></code></pre>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">Function.prototype.call()</a>
非严格模式下，this默认指向全局对象，call/apply显式指定this参数时也会强制转换参数为对象（如果不是对象）。其中，null/undefined被替换为全局对象，基础类型被转换为包装对象。</p>
<p>严格模式下，this默认为undefined，且call/apply显式指定this参数时也不会有强制转换。</p>
<h3 id="9-数组的展开扁平">9. 数组的展开/扁平</h3>
<p><code>[1,2,[2,3,[4,5]]]</code>---&gt;<code>[1,2,2,3,4,5]</code></p>
<pre><code class="language-javascript"><span class="hljs-keyword">function</span> flatten(arr) {
    <span class="hljs-keyword">if</span>(!is<span class="hljs-constructor">Array(<span class="hljs-params">arr</span>)</span><span class="hljs-operator"> || </span>!arr.length) {
        return <span class="hljs-literal">[]</span>;
    } <span class="hljs-keyword">else</span> {
        return <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Array</span>.</span></span>prototype.concat.apply(<span class="hljs-literal">[]</span>, arr.map(<span class="hljs-keyword">function</span>(<span class="hljs-keyword">val</span>) {
            return is<span class="hljs-constructor">Array(<span class="hljs-params">val</span>)</span> ? flatten(<span class="hljs-keyword">val</span>) : <span class="hljs-keyword">val</span>;
        }));
    }

    <span class="hljs-keyword">function</span> is<span class="hljs-constructor">Array(<span class="hljs-params">arr</span>)</span> {
        return <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Object</span>.</span></span>prototype.toString.call(arr).slice(<span class="hljs-number">8</span>, -<span class="hljs-number">1</span>).<span class="hljs-keyword">to</span><span class="hljs-constructor">LowerCase()</span><span class="hljs-operator"> === </span>'<span class="hljs-built_in">array</span>';
    }
}
flatten(<span class="hljs-literal">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</span>]]);
<span class="hljs-comment">// [1, 2, 2, 3, 4, 5]</span></code></pre>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat">Array.prototype.concat</a></p>
<h3 id="10-delete-操作符">10. delete 操作符</h3>
<pre><code class="language-javascript"> (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span></span>{
    <span class="hljs-keyword">delete</span> x;
    <span class="hljs-keyword">return</span> x;
})(<span class="hljs-number">1</span>);
<span class="hljs-comment">// 返回 1</span></code></pre>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete">delete</a>
对局部变量和函数名delete是无效的，delete只能删除属性。delete obj.propName 才是合法的形式。下面以代码详细解释：</p>
<pre><code class="language-javascript"><span class="hljs-comment">// ========例1========</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-string">'use strict'</span>;
    <span class="hljs-keyword">delete</span> x;
})(<span class="hljs-number">1</span>);
<span class="hljs-comment">// Uncaught SyntaxError: Delete of an unqualified identifier in strict mode.</span>
<span class="hljs-comment">// 在严格模式下，删除不合法的标识符x（x是变量）</span>

<span class="hljs-comment">// ========例2========</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-string">'use strict'</span>;
    <span class="hljs-keyword">var</span> obj = {};
    <span class="hljs-built_in">Object</span>.defineProperty(obj, <span class="hljs-string">'x'</span>, {
        <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-string">'hi'</span>
    });
    <span class="hljs-keyword">delete</span> obj.x;
})()
<span class="hljs-comment">// Uncaught TypeError: Cannot delete property 'x' of #&lt;Object&gt;</span>
<span class="hljs-comment">// 合法的删除形式，但属性x是non-configurable的，严格模式下报错</span>

<span class="hljs-comment">// ========例3========</span>
<span class="hljs-built_in">window</span>.x = <span class="hljs-number">100</span>;
<span class="hljs-built_in">window</span>.y = <span class="hljs-number">100</span>;
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-built_in">console</span>.log(x, <span class="hljs-built_in">window</span>.x, <span class="hljs-built_in">window</span>.y);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">delete</span> x, <span class="hljs-keyword">delete</span> y);
    <span class="hljs-built_in">console</span>.log(x, <span class="hljs-built_in">window</span>.x, <span class="hljs-built_in">window</span>.y);
    <span class="hljs-keyword">return</span> x;
})(<span class="hljs-number">1</span>);
<span class="hljs-comment">// 1 100 100</span>
<span class="hljs-comment">// false true</span>
<span class="hljs-comment">// 1 100 undefined</span>

<span class="hljs-comment">// delete x失败，因为x是变量（函数内局部变量x覆盖全局变量x），delete y成功，y是全局对象window的属性。</span>
<span class="hljs-comment">// 非严格模式下，可以 delete y 的写法，但此时是尝试删除全局对象的同名属性y（y在作用域中不是变量或函数名）。</span></code></pre>
<h3 id="11-找出字符串中出现最多的字母">11. 找出字符串中出现最多的字母</h3>
<p>假设字符串'ababccdeajxac'，请找出出现次数最多的字符？</p>
<p>最先想到的解法是用map纪录每个字符的次数，然后找出最多的即可：</p>
<pre><code class="language-javascript"><span class="hljs-keyword">function</span> getMaxNumberOfChar(str) {
    <span class="hljs-keyword">return</span> (str + <span class="hljs-string">''</span>).split(<span class="hljs-string">''</span>).reduce(<span class="hljs-keyword">function</span>(pre, cur, <span class="hljs-keyword">index</span>, arr) {
        cur <span class="hljs-keyword">in</span> pre ? pre[cur]++ : (pre[cur] = <span class="hljs-number">1</span>);
        pre[cur] &gt; pre.<span class="hljs-keyword">value</span> &amp;&amp; (pre.char = cur, pre.<span class="hljs-keyword">value</span> = pre[cur]);
        <span class="hljs-keyword">return</span> pre;
    }, {<span class="hljs-keyword">value</span>: <span class="hljs-number">0</span>});
}
getMaxNumberOfChar(<span class="hljs-string">'ababccdeajxac'</span>) // <span class="hljs-keyword">Object</span> {<span class="hljs-keyword">value</span>: <span class="hljs-number">4</span>, a: <span class="hljs-number">4</span>, <span class="hljs-type">char</span>: "a", b: <span class="hljs-number">2</span>, c: <span class="hljs-number">3</span>…}</code></pre>
<p>此外，可以考虑用正则来辅助处理：</p>
<pre><code class="language-javascript"><span class="hljs-selector-tag">function</span> <span class="hljs-selector-tag">getMaxNumberOfChar</span>(str) {
    <span class="hljs-selector-tag">return</span> (str + <span class="hljs-string">''</span>)<span class="hljs-selector-class">.split</span>(<span class="hljs-string">''</span>)<span class="hljs-selector-class">.sort</span>()<span class="hljs-selector-class">.join</span>(<span class="hljs-string">''</span>)<span class="hljs-selector-class">.match</span>(/(\w)\<span class="hljs-number">1</span>*/g)<span class="hljs-selector-class">.reduce</span>(function(pre, cur) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">cur</span><span class="hljs-selector-class">.length</span> &gt; <span class="hljs-selector-tag">pre</span><span class="hljs-selector-class">.value</span> ? {<span class="hljs-attribute">value</span>: cur.length, <span class="hljs-attribute">char</span>: cur[<span class="hljs-number">0</span>]} : <span class="hljs-selector-tag">pre</span>;
    }, {<span class="hljs-attribute">value</span>: <span class="hljs-number">0</span>})
}
getMaxNumberOfChar(<span class="hljs-string">'ababccdeajxac'</span>) <span class="hljs-comment">// Object {value: 4, char: "a"}</span></code></pre>
<h3 id="12--storage-event">12.  storage event</h3>
<p>当你用<code>localStorage</code>或<code>sessionStorage</code>的API去更改Storage时，会触发storage事件：</p>
<pre><code class="language-javascript"><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'storage'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'storage'</span>, e);
});</code></pre>
<p>这里没有什么特别的，但基本所有问题的根源，或者说要特别注意的是：本页面更改Storage只能在同域名的<strong>其它</strong>页面去捕获storage事件。</p>
<h3 id="13-一个函数柯里化问题及更多">13. 一个函数柯里化问题及更多</h3>
<p>要求实现sum函数如下：</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span> <span class="hljs-comment">// 1</span>
<span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span> <span class="hljs-comment">// 3</span>
<span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span></span> <span class="hljs-comment">// 6</span></code></pre>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span><span class="hljs-params">(item)</span> </span>{
    <span class="hljs-keyword">var</span> cur = item;
    <span class="hljs-keyword">var</span> inner = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(next)</span> </span>{
        <span class="hljs-keyword">if</span> (next != <span class="hljs-literal">null</span>) cur += next;
        <span class="hljs-keyword">return</span> inner;
    };
    inner.toString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> cur;
    }
    <span class="hljs-keyword">return</span> inner;
}</code></pre>
<p>console.log(), 如果传入的是函数，则会调用toString()方法打印函数，这里改写了inner的toString函数，达到输出结果的目的</p>
<h3 id="14-typeof">14. typeOf</h3>
<pre><code class="language-javascript"><span class="hljs-selector-tag">Object</span><span class="hljs-selector-class">.prototype</span><span class="hljs-selector-class">.toString</span><span class="hljs-selector-class">.call</span>(<span class="hljs-selector-tag">obj</span>)<span class="hljs-selector-class">.slice</span>(8, <span class="hljs-selector-tag">-1</span>);</code></pre>
<h3 id="15--运算规则的图形化表示">15.  <code>==</code>运算规则的图形化表示</h3>
<p><a href="https://camo.githubusercontent.com/af251d0062891ec9d9ff4b9dc7886b4522c743d0/687474703a2f2f7777312e73696e61696d672e636e2f6c617267652f61363630636162326779316663796a666d776330336a323078733067796a7630">link</a></p>
<pre><code>前面说得很乱，根据我们得到的最终的图<span class="hljs-number">3</span>，我们总结一下==运算的规则：

<span class="hljs-number">1.</span> <span class="hljs-literal">undefined</span> == <span class="hljs-literal">null</span>，结果是<span class="hljs-literal">true</span>。且它俩与所有其他值比较的结果都是<span class="hljs-literal">false</span>。

<span class="hljs-number">2.</span> <span class="hljs-built_in">String</span> == <span class="hljs-built_in">Boolean</span>，需要两个操作数同时转为<span class="hljs-built_in">Number</span>。

<span class="hljs-number">3.</span> <span class="hljs-built_in">String</span>/<span class="hljs-built_in">Boolean</span> == <span class="hljs-built_in">Number</span>，需要<span class="hljs-built_in">String</span>/<span class="hljs-built_in">Boolean</span>转为<span class="hljs-built_in">Number</span>。

<span class="hljs-number">4.</span> <span class="hljs-built_in">Object</span> == Primitive，需要<span class="hljs-built_in">Object</span>转为Primitive(具体通过valueOf和toString方法)。

瞧见没有，一共只有<span class="hljs-number">4</span>条规则！是不是很清晰、很简单。</code></pre><p>原文:   <a href="https://github.com/jawil/blog/issues/1">从'[]== ! []'为true来剖析JavaScript各种蛋疼的类型转换</a></p>
<h3 id="16-变量提升预加载">16. 变量提升/预加载</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> foo = <span class="hljs-number">1</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!foo) {
        <span class="hljs-keyword">var</span> foo = <span class="hljs-number">10</span>;
    }
    <span class="hljs-built_in">console</span>.log(foo);
}
bar(); <span class="hljs-comment">// 10</span>

faz(<span class="hljs-string">'faz'</span>); <span class="hljs-comment">// faz</span>
<span class="hljs-keyword">if</span>(<span class="hljs-literal">true</span>){
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">x</span>)</span>{
        <span class="hljs-built_in">console</span>.log(x);
    }
}
<span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>){
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params">x</span>)</span>{
        <span class="hljs-built_in">console</span>.log(x);
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">faz</span>(<span class="hljs-params">x</span>)</span>{
    <span class="hljs-built_in">console</span>.log(x);
}
foo(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// foo</span>
bar(<span class="hljs-string">'bar'</span>); <span class="hljs-comment">// Uncaught TypeError: bar is not a function</span></code></pre>
<p>对于变量的定义，无论是否存在逻辑判断，JavaScript都会进行预解析，而对于函数声明，JavaScript并不会对逻辑判断中的进行预加载，只会对函数主体中暴露的进行预加载。</p>
<h3 id="17-预加载顺序">17. 预加载顺序</h3>
<pre><code class="language-javascript"><span class="hljs-built_in">console</span>.log(x) <span class="hljs-comment">// function</span>
<span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;
<span class="hljs-built_in">console</span>.log(x) <span class="hljs-comment">//10</span>
x = <span class="hljs-number">20</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">x</span>(<span class="hljs-params"></span>)</span>{}
<span class="hljs-built_in">console</span>.log(x) <span class="hljs-comment">//20</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y</span>)</span>{
    <span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// ƒ x(){}</span>
    <span class="hljs-built_in">console</span>.log(y); <span class="hljs-comment">//2</span>
    <span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>,y=<span class="hljs-number">20</span>;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">x</span>(<span class="hljs-params"></span>)</span>{}
    <span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">//10</span>
    <span class="hljs-built_in">console</span>.log(y);  <span class="hljs-comment">//20</span>
})(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</code></pre>
<pre><code>    <span class="hljs-number">1.</span> 函数的参数，如果有参数直接赋值
    <span class="hljs-number">2.</span> 函数内部的函数声明，如果有则前置，如果函数名与参数重复则覆盖掉参数
    <span class="hljs-number">3.</span> 函数内部的变量声明，如果有则前置，如果变量名与 函数声明重复 会忽略该变量声明，只是忽略声明 赋值语句仍有效</code></pre><h3 id="18-查找数组中最大小值">18. 查找数组中最大/小值</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">458</span> , <span class="hljs-number">120</span> , <span class="hljs-number">-215</span> ];
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-literal">null</span>, numbers));
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-literal">null</span>, numbers));</code></pre>
<h3 id="19-判断一个对象是不是数组">19. 判断一个对象是不是数组</h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArray</span>(<span class="hljs-params">myArray</span>) </span>{
    <span class="hljs-keyword">return</span> myArray.<span class="hljs-keyword">constructor</span>.toString(<span class="hljs-params"></span>).indexOf(<span class="hljs-params">"<span class="hljs-built_in">Array</span>"</span>) &gt; -1;
}</code></pre>
<h3 id="20-this">20. this</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> length = <span class="hljs-number">10</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span><span class="hljs-params">()</span> <span class="hljs-comment">{
    console.log(this.length)
}</span>;</span>
<span class="hljs-keyword">var</span> obj = <span class="hljs-comment">{
    length: 5,
    method: function (fn) {
        fn();
        arguments[0]();
        fn.call(obj, 12);
    }</span>
};
obj<span class="hljs-function">.<span class="hljs-keyword">method</span><span class="hljs-params">(fn, 1)</span>;</span> <span class="hljs-comment">// 10 2 5</span></code></pre>
<p><a href="https://segmentfault.com/a/1190000007964935">一个小小的JavaScript题目</a></p>
<h3 id="21-运算符优先级问题">21. 运算符优先级问题</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">'why I am '</span> + <span class="hljs-keyword">typeof</span> + <span class="hljs-string">''</span>; <span class="hljs-comment">// so what is str?</span></code></pre>
<p><code>str</code> 是 <code>why I am number</code>,  思考一下，上面的代码应该等同于<code>'why I am ' + (typeof (+ ''))</code>。
<code>typeof</code> 运算符优先级高于<code>+</code>，并且是<code>right-to-left</code></p>
<h3 id="22-prefix-increment-operator的问题">22. Prefix Increment Operator(++)的问题</h3>
<p>关于前自增运算符的一个有意思的问题：</p>
<pre><code class="language-javascript">++<span class="hljs-string">'52'</span>.<span class="hljs-built_in">split</span>(<span class="hljs-string">''</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment"> //返回的是？</span></code></pre>
<p>这道题来自<a href="http://www.zhangxinxu.com/wordpress/2013/05/%E7%90%86%E8%A7%A3another-javascript-quiz-%E9%A2%98%E7%9B%AE/">Another JavaScript quiz</a>第8题，主要是优先级问题，应该返回6，看完答案应该没什么难理解的。但是，题目的某个注意点:</p>
<pre><code class="language-javascript">++'5'
<span class="hljs-comment">// Uncaught ReferenceError: Invalid left-hand side expression in prefix operation</span></code></pre>
<p>却非常有意思。所以问题是为什么++'5'报错而++'52'.split('')[0]可以正确执行？</p>
<p>阅读<a href="http://es5.github.io/#x11.4.4">http://es5.github.io/#x11.4.4</a>，可以看到_Prefix Increment Operator_操作的第5步PutValue(expr, newValue)要求expr是引用。</p>
<p>而在这里:</p>
<ul>
<li><code>'5'</code>是值，不是引用，所以报错。</li>
<li><code>'52'.split('')[0]</code>返回的是<code>['5','2'][0]</code>，对象的属性访问返回的是引用，所以可以正确执行。</li>
</ul>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> <span class="hljs-symbol">x</span> = <span class="hljs-string">'5'</span>;
++<span class="hljs-symbol">x</span>  <span class="hljs-comment">// 6</span>

++<span class="hljs-string">'5'</span>[<span class="hljs-number">0</span>] <span class="hljs-comment">// 6</span></code></pre>
<h3 id="23-异步的throw将不会被promise捕获">23. 异步的<code>throw</code>将不会被<code>Promise</code>捕获</h3>
<p>我们知道，在<code>Promise</code>内部<code>throw</code>，<code>promise</code>将会变成<code>rejected</code>状态，并且通过<code>catch</code>可以捕获错误（也就是说，我们可以不用显示调用<code>reject</code>）。示例如下：</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-comment">// alternative: reject('hi')</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-string">'hi'</span>
})
<span class="hljs-comment">// 这里的 reason 就是 hi</span>
promise.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(reason))</code></pre>
<p>但请注意，异步的<code>throw</code>将不会被捕获到。</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeoutPromiseThrow</span>(<span class="hljs-params">delay</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> {
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">throw</span> ( <span class="hljs-string">"Timeout!"</span> );
        }, delay );
    } );
}

<span class="hljs-keyword">const</span> th = timeoutPromiseThrow(<span class="hljs-number">2000</span>).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"throw "</span> + err); })
<span class="hljs-comment">// th 将永远是 pending 状态。</span></code></pre>
<p>解释：<code>promise</code>内部有类似<code>try{} catch...</code>的机制，但显然，异步的<code>throw</code>是无法被捕获的，异步请显式调用<code>reject</code>。</p>
<h3 id="24-jsonparse-的一个摸不着头脑的报错unexpected-token-o-in-json">24. <code>JSON.parse</code> 的一个摸不着头脑的报错<code>Unexpected token o in JSON</code></h3>
<pre><code class="language-javascript">JSON.parse<span class="hljs-params">(obj)</span> <span class="hljs-string">//</span> obj.toString<span class="hljs-params">()</span> <span class="hljs-params">---</span>&gt; <span class="hljs-string">"[object Object]"</span></code></pre>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON语法</a></p>
<pre><code class="language-javascript">JSON.parse(<span class="hljs-string">'[1, "b"]'</span>)
<span class="hljs-regexp">//</span> [<span class="hljs-number">1</span>, <span class="hljs-string">"b"</span>]</code></pre>
<h3 id="25-javascript-中参数是值传递还是引用传递？">25. JavaScript 中参数是值传递还是引用传递？</h3>
<p><a href="https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language">StackOverflow</a> :
JavaScript 既不是值传递，也不是引用传递，而是 call by sharing .</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeStuff</span>(<span class="hljs-params">a, b, c</span>)
</span>{
  a = a * <span class="hljs-number">10</span>;
  b.item = <span class="hljs-string">"changed"</span>;
  c = {<span class="hljs-attr">item</span>: <span class="hljs-string">"changed"</span>};
}

<span class="hljs-keyword">var</span> num = <span class="hljs-number">10</span>;
<span class="hljs-keyword">var</span> obj1 = {<span class="hljs-attr">item</span>: <span class="hljs-string">"unchanged"</span>};
<span class="hljs-keyword">var</span> obj2 = {<span class="hljs-attr">item</span>: <span class="hljs-string">"unchanged"</span>};

changeStuff(num, obj1, obj2);

<span class="hljs-built_in">console</span>.log(num);   <span class="hljs-comment">// 10</span>
<span class="hljs-built_in">console</span>.log(obj1.item);    <span class="hljs-comment">// changed</span>
<span class="hljs-built_in">console</span>.log(obj2.item);    <span class="hljs-comment">// unchanged</span></code></pre>
<pre><code>    <span class="hljs-number">1.</span> 传值：参数指向新内存（新内存复制了值），操作参数和原来的变量（指向的内存）没有半毛钱的关系。
    <span class="hljs-number">2.</span> 传引用：参数指向同一份内存（没有复制值），操作参数即操作原来的变量（指向的内存）。
    <span class="hljs-number">3.</span> call by sharing：参数指向新内存，但新内存复制了原来的内存地址，直接赋值的话相当于覆盖了新内存的内容，不会影响原来的变量；但是改变对象的属性其实还是操作了原来的对象。</code></pre><p>Java 中传参数的本质是赋值操作，primitive 就是本身的值，object 就是内存地址。</p>
<p>以上问题来自于<a href="https://github.com/creeperyang/blog/issues/2">JavaScript问题集锦</a>, 以及看的时候查阅的其他资料</p>
<h3 id="26-javascript的操作符优先级从高到低排序">26. JavaScript的操作符优先级,从高到低排序</h3>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence">MDN</a></p>
<h3 id="27--一道颇有难度的javascript题">27.  <a href="https://segmentfault.com/a/1190000007979730">一道颇有难度的JavaScript题</a></h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"></span>) </span>{
    getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'1'</span>);
    };
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}
Foo.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'2'</span>);
};
Foo.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'3'</span>);
};
<span class="hljs-keyword">var</span> getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'4'</span>);
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>);
}

Foo.getName();  <span class="hljs-comment">// 2</span>
getName();    <span class="hljs-comment">// 4</span>
Foo().getName(); <span class="hljs-comment">// 1</span>
getName();  <span class="hljs-comment">// 1</span>
<span class="hljs-keyword">new</span> Foo.getName(); <span class="hljs-comment">// 2</span>
<span class="hljs-keyword">new</span> Foo().getName();   <span class="hljs-comment">// 3</span>
<span class="hljs-keyword">new</span> <span class="hljs-keyword">new</span> Foo().getName();   <span class="hljs-comment">// 3</span></code></pre>
<p>new 优先级？</p>
<h3 id="28-实现-functionprototypebind">28. 实现 <code>Function.prototype.bind()</code></h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span><span class="hljs-params">(num1, num2)</span> </span>{
    <span class="hljs-keyword">this</span>.num1 = num1;
    <span class="hljs-keyword">this</span>.num2 = num2;
}

obj = {}
test1 = test.bind(obj, <span class="hljs-number">456</span>)
test1(<span class="hljs-number">123</span>)
obj.num1 <span class="hljs-comment">// 456</span>
obj.num2 <span class="hljs-comment">// 123</span></code></pre>
<pre><code class="language-javascript"><span class="hljs-built_in">Function</span>.prototype.bind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> fn = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
    <span class="hljs-keyword">var</span> context = args.shift();

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">return</span> fn.apply(context,
            args.concat(<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)));
    };
};</code></pre>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">Function.prototype.apply()</a>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">Function.prototype.bind()</a></p>
<h3 id="29-函数节流和函数防抖">29. 函数节流和函数防抖</h3>
<pre><code class="language-javascript"><span class="hljs-comment">// 简单的节流函数</span>
<span class="hljs-comment">//fun 要执行的函数</span>
<span class="hljs-comment">//delay 延迟</span>
<span class="hljs-comment">//time  在time时间内必须执行一次</span>
function throttle(<span class="hljs-function"><span class="hljs-keyword">fun</span>, delay, time) {</span>
    <span class="hljs-keyword">var</span> timeout,
        startTime = new Date();
    <span class="hljs-keyword">return</span> function() {
        <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">this</span>,
            args = arguments,
            curTime = new Date();
        clearTimeout(timeout);
        <span class="hljs-comment">// 如果达到了规定的触发时间间隔，触发 handler</span>
        <span class="hljs-keyword">if</span> (curTime - startTime &gt;= time) {
            <span class="hljs-function"><span class="hljs-keyword">fun</span>.<span class="hljs-title">apply</span><span class="hljs-params">(context, args)</span></span>;
            startTime = curTime;
            <span class="hljs-comment">// 没达到触发间隔，重新设定定时器</span>
        } <span class="hljs-keyword">else</span> {
            timeout = setTimeout(function(){
                <span class="hljs-function"><span class="hljs-keyword">fun</span>.<span class="hljs-title">apply</span><span class="hljs-params">(context, args)</span></span>;
            }, delay);
        }
    };
};</code></pre>
<pre><code class="language-javascript"><span class="hljs-comment">// 简单的防抖函数</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">fn, delay</span>) </span>{
  <span class="hljs-comment">// 持久化一个定时器 timer</span>
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-comment">// 闭包函数可以访问 timer</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 通过 'this' 和 'arguments'</span>
    <span class="hljs-comment">// 获得函数的作用域和参数</span>
    <span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span>;
    <span class="hljs-comment">// 如果事件被触发，清除 timer 并重新开始计时</span>
    clearTimeout(timer);
    timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      fn.apply(context, args);
    }, delay);
  }
}</code></pre>
<p><a href="https://blog.coding.net/blog/the-difference-between-throttle-and-debounce-in-underscorejs">浅谈 Underscore.js 中 _.throttle 和 _.debounce 的差异</a></p>
<h3 id="30--懒加载-lazyload">30.  懒加载 lazyload</h3>
<pre><code class="language-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> num = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'img'</span>).length;
    <span class="hljs-keyword">var</span> img = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"img"</span>);
    <span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>; <span class="hljs-comment">//存储图片加载到的位置，避免每次都从第一张图片开始遍历</span>
    lazyload(); <span class="hljs-comment">//页面载入完毕加载可是区域内的图片</span>
    <span class="hljs-built_in">window</span>.onscroll = lazyload;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lazyload</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">//监听页面滚动事件</span>
        <span class="hljs-keyword">var</span> seeHeight = <span class="hljs-built_in">document</span>.documentElement.clientHeight; <span class="hljs-comment">//可见区域高度</span>
        <span class="hljs-keyword">var</span> scrollTop = <span class="hljs-built_in">document</span>.documentElement.scrollTop || <span class="hljs-built_in">document</span>.body.scrollTop; <span class="hljs-comment">//滚动条距离顶部高度</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = n; i &lt; num; i++) {
            <span class="hljs-keyword">if</span> (img[i].offsetTop &lt; seeHeight + scrollTop) {
                <span class="hljs-keyword">if</span> (img[i].getAttribute(<span class="hljs-string">"src"</span>) == <span class="hljs-string">"default.jpg"</span>) {
                    img[i].src = img[i].getAttribute(<span class="hljs-string">"data-src"</span>);
                }
                n = i + <span class="hljs-number">1</span>;
            }
        }
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>使用节流函数进行性能优化</p>
<pre><code class="language-javascript"><span class="hljs-comment">// 简单的节流函数</span>
<span class="hljs-comment">//fun 要执行的函数</span>
<span class="hljs-comment">//delay 延迟</span>
<span class="hljs-comment">//time  在time时间内必须执行一次</span>
function throttle(<span class="hljs-function"><span class="hljs-keyword">fun</span>, delay, time) {</span>
    <span class="hljs-keyword">var</span> timeout,
        startTime = new Date();
    <span class="hljs-keyword">return</span> function() {
        <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">this</span>,
            args = arguments,
            curTime = new Date();
        clearTimeout(timeout);
        <span class="hljs-comment">// 如果达到了规定的触发时间间隔，触发 handler</span>
        <span class="hljs-keyword">if</span> (curTime - startTime &gt;= time) {
            <span class="hljs-function"><span class="hljs-keyword">fun</span>.<span class="hljs-title">apply</span><span class="hljs-params">(context, args)</span></span>;
            startTime = curTime;
            <span class="hljs-comment">// 没达到触发间隔，重新设定定时器</span>
        } <span class="hljs-keyword">else</span> {
            timeout = setTimeout(function(){
                <span class="hljs-function"><span class="hljs-keyword">fun</span>.<span class="hljs-title">apply</span><span class="hljs-params">(context, args)</span></span>;
            }, delay);
        }
    };
};
<span class="hljs-comment">// 实际想绑定在 scroll 事件上的 handler</span>
function lazyload(event) {}
<span class="hljs-comment">// 采用了节流函数</span>
window.addEventListener(<span class="hljs-string">'scroll'</span>,throttle(lazyload,<span class="hljs-number">500</span>,<span class="hljs-number">1000</span>));</code></pre>
<p>使用去抖函数进行性能优化</p>
<pre><code class="language-javascript"><span class="hljs-comment">// debounce函数用来包裹我们的事件</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">fn, delay</span>) </span>{
  <span class="hljs-comment">// 持久化一个定时器 timer</span>
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-comment">// 闭包函数可以访问 timer</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// 通过 'this' 和 'arguments'</span>
    <span class="hljs-comment">// 获得函数的作用域和参数</span>
    <span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span>;
    <span class="hljs-comment">// 如果事件被触发，清除 timer 并重新开始计时</span>
    clearTimeout(timer);
    timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      fn.apply(context, args);
    }, delay);
  }
}
<span class="hljs-comment">// 实际想绑定在 scroll 事件上的 handler</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lazyload</span>(<span class="hljs-params">event</span>) </span>{}
<span class="hljs-comment">// 采用了去抖函数</span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'scroll'</span>,throttle(lazyload,<span class="hljs-number">500</span>));</code></pre>
<p><a href="https://i.jakeyu.top//2016/11/26/%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/">实现图片懒加载(lazyload)</a></p>
<h3 id="31-new-操作符都做了什么？">31. new 操作符都做了什么？</h3>
<pre><code><span class="hljs-number">1.</span> 创建一个新的对象
<span class="hljs-number">2.</span> 将构造函数的<span class="hljs-keyword">this</span>指向这个新对象
<span class="hljs-number">3.</span> 执行构造函数的代码，为这个对象添加属性，方法等
<span class="hljs-number">4.</span> 返回新对象</code></pre><h3 id="32-原生ajax">32. 原生Ajax</h3>
<pre><code class="language-javascript"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.ActiveXObject){
    xmlHttp=<span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Microsoft.XMLHTTP"</span>);
}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.XMLHttpRequest)
    xmlHttp=<span class="hljs-keyword">new</span> XMLHttpRequest();
}

<span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()
xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">switch</span> (xhr.readyState) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'未初始化, 尚未调用open()'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'启动, 已调用open(), 未调用send()'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'发送, 已调用send(), 为未收到响应'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'接受, 已接受到部分数据'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'完成, 已接受全部数据'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">break</span>;
  }
}
<span class="hljs-comment">// xhr.onload = function(e) {</span>
<span class="hljs-comment">//  var res = e.target.response.message</span>
<span class="hljs-comment">// }</span>
<span class="hljs-comment">// xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');</span>
<span class="hljs-comment">// xhr.responseType = 'json';</span>
<span class="hljs-comment">// 避免缓存： url+时间戳</span>
xhr.open(<span class="hljs-string">'GET'</span>, URL);
xhr.send(<span class="hljs-literal">null</span>);

httpRequest.open(<span class="hljs-string">'POST'</span>, url);
httpRequest.setRequestHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/x-www-form-urlencoded'</span>);
httpRequest.send(<span class="hljs-string">'userName='</span> + <span class="hljs-built_in">encodeURIComponent</span>(userName));</code></pre>
<p><a href="https://segmentfault.com/a/1190000004100271">脱离jQuery，使用原生Ajax</a></p>
<h3 id="33-封装一个轮播图组件">33. 封装一个轮播图组件</h3>
<pre><code>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $ </span>) </span>{
    $.fn.initCarousel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'target'</span>));
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
          target = $(<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'target'</span>)),
          elementName = <span class="hljs-keyword">this</span>.data(<span class="hljs-string">'element'</span>),
          elements = target.find(elementName),
          time = <span class="hljs-literal">null</span>,
          timeNav = <span class="hljs-literal">null</span>,
          curImg = <span class="hljs-literal">null</span>,
          curIndex = <span class="hljs-number">1</span>,
          init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(elements);
            curImg = $(target.find(elementName + <span class="hljs-string">'.cur'</span>)[<span class="hljs-number">0</span>]);
            self.find(<span class="hljs-string">'li'</span>).removeClass(<span class="hljs-string">'hover'</span>);
            self.find(<span class="hljs-string">'li'</span>).eq(curIndex).addClass(<span class="hljs-string">'hover'</span>);
            curImg.fadeOut(<span class="hljs-number">10</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
              curImg.removeClass(<span class="hljs-string">'cur'</span>);
              elements.eq(curIndex - <span class="hljs-number">1</span>).addClass(<span class="hljs-string">'cur'</span>).fadeIn(<span class="hljs-number">500</span>)
            });
            curIndex++;
            curIndex = curIndex == elements.length ? <span class="hljs-number">0</span> : curIndex++;
            time = setTimeout(init, <span class="hljs-number">3000</span>)
          };
      time = setTimeout(init, <span class="hljs-number">3000</span>);
      <span class="hljs-keyword">this</span>.find(<span class="hljs-string">'li'</span>).bind(<span class="hljs-string">'mouseenter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        curIndex = $(<span class="hljs-keyword">this</span>).index();
        <span class="hljs-built_in">console</span>.log(curIndex);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>)
        self.find(<span class="hljs-string">"li"</span>).removeClass(<span class="hljs-string">"hover"</span>);
        clearTimeout(time);
        clearTimeout(timeNav);
        timeNav = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          elements.hide();
          elements.removeClass(<span class="hljs-string">'cur'</span>);
          elements.eq(curIndex - <span class="hljs-number">1</span>).addClass(<span class="hljs-string">'cur'</span>).show()
        }, <span class="hljs-number">200</span>)
        $(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">'hover'</span>);
        curIndex = curIndex == elements.length ? <span class="hljs-number">0</span> : curIndex + <span class="hljs-number">1</span>;
        time = setTimeout(init, <span class="hljs-number">3000</span>)
      })
    };
})( jQuery );
$(<span class="hljs-string">'.slide'</span>).initCarousel();</code></pre><h3 id="34-输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。例如输入前序遍历序列12473568和中序遍历序列47215386，则重建二叉树并返回。">34. 输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。例如输入前序遍历序列{1,2,4,7,3,5,6,8}和中序遍历序列{4,7,2,1,5,3,8,6}，则重建二叉树并返回。</h3>
<pre><code class="language-javascript">作者：faremax
链接：https:<span class="hljs-comment">//www.nowcoder.com/discuss/49349</span>
来源：牛客网

<span class="hljs-comment">/* function TreeNode(x) {
    this.val = x;
    this.left = null;
    this.right = null;
} */</span>
<span class="hljs-keyword">function</span> re<span class="hljs-constructor">ConstructBinaryTree(<span class="hljs-params">pre</span>, <span class="hljs-params">vin</span>)</span>{
    <span class="hljs-keyword">if</span>(pre.length<span class="hljs-operator"> == </span><span class="hljs-number">0</span><span class="hljs-operator"> || </span>vin.length<span class="hljs-operator"> == </span><span class="hljs-number">0</span>){
        return null;
    };
    var index = vin.index<span class="hljs-constructor">Of(<span class="hljs-params">pre</span>[0])</span>;
    var left = vin.slice(<span class="hljs-number">0</span>,index);
    var right = vin.slice(index+<span class="hljs-number">1</span>);
    var node = <span class="hljs-keyword">new</span> <span class="hljs-constructor">TreeNode(<span class="hljs-params">vin</span>[<span class="hljs-params">index</span>])</span>;
    node.left = re<span class="hljs-constructor">ConstructBinaryTree(<span class="hljs-params">pre</span>.<span class="hljs-params">slice</span>(1,<span class="hljs-params">index</span>+1)</span>,left);
    node.right = re<span class="hljs-constructor">ConstructBinaryTree(<span class="hljs-params">pre</span>.<span class="hljs-params">slice</span>(<span class="hljs-params">index</span>+1)</span>,right);
    return node;
}</code></pre>
<h3 id="35-用两个栈来实现一个队列，完成队列的push和pop操作。-队列中的元素为int类型。">35. 用两个栈来实现一个队列，完成队列的Push和Pop操作。 队列中的元素为int类型。</h3>
<pre><code class="language-javascript">作者：faremax
链接：https://www.nowcoder.com/discuss/<span class="hljs-number">49349</span>
来源：牛客网

<span class="hljs-built_in">var</span> stack1 = [];
<span class="hljs-built_in">var</span> stack2 = [];
function <span class="hljs-built_in">push</span>(node){
    stack1.<span class="hljs-built_in">push</span>(node);
}
function <span class="hljs-built_in">pop</span>(){
    <span class="hljs-built_in">var</span> temp = stack1.<span class="hljs-built_in">pop</span>();
    <span class="hljs-keyword">while</span>(temp){
        stack2.<span class="hljs-built_in">push</span>(temp);
        temp = stack1.<span class="hljs-built_in">pop</span>();
    }
    <span class="hljs-built_in">var</span> result = stack2.<span class="hljs-built_in">pop</span>();
    temp = stack2.<span class="hljs-built_in">pop</span>();
    <span class="hljs-keyword">while</span>(temp){
        stack1.<span class="hljs-built_in">push</span>(temp);
        temp = stack2.<span class="hljs-built_in">pop</span>();
    }
    <span class="hljs-built_in">return</span> result;
}</code></pre>
<h3 id="36-大家都知道斐波那契数列，现在要求输入一个整数n，请你输出斐波那契数列的第n项。n39">36. 大家都知道斐波那契数列，现在要求输入一个整数n，请你输出斐波那契数列的第n项。n&lt;=39</h3>
<pre><code class="language-javascript">作者：faremax
链接：https:<span class="hljs-comment">//www.nowcoder.com/discuss/49349</span>
来源：牛客网

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Fibonacci</span><span class="hljs-params">(n)</span></span>{
    <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>, b = <span class="hljs-number">1</span>, temp;
    <span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++){
      temp = b;
      b = a + b;
      a = temp;
    }
    <span class="hljs-keyword">return</span> a;
}</code></pre>
<h3 id="37-一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法。">37. 一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</h3>
<p>我们可以用21的小矩形横着或者竖着去覆盖更大的矩形。请问用n个21的小矩形无重叠地覆盖一个2*n的大矩形，总共有多少种方法？</p>
<pre><code class="language-javascript">作者：faremax
链接：https:<span class="hljs-comment">//www.nowcoder.com/discuss/49349</span>
来源：牛客网

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jumpFloor</span>(<span class="hljs-params"><span class="hljs-built_in">number</span></span>)</span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">number</span> &lt; <span class="hljs-number">1</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">number</span> === <span class="hljs-number">1</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">number</span> === <span class="hljs-number">2</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">var</span> temp = <span class="hljs-number">0</span>, a = <span class="hljs-number">1</span>, b = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">3</span>; i &lt;= <span class="hljs-built_in">number</span>; i++){
        temp = a + b;
        a = b;
        b = temp;
    }
    <span class="hljs-keyword">return</span> temp;
}</code></pre>
<h3 id="38-一只青蛙一次可以跳上1级台阶，也可以跳上2级它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。">38. 一只青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jumpFloorII</span>(<span class="hljs-params"><span class="hljs-built_in">number</span></span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-built_in">number</span> - <span class="hljs-number">1</span>);
}</code></pre>
<h3 id="39-输入一个整数，输出该数二进制表示中1的个数。其中负数用补码表示。">39. 输入一个整数，输出该数二进制表示中1的个数。其中负数用补码表示。</h3>
<pre><code class="language-javascript">作者：faremax
链接：https:<span class="hljs-comment">//www.nowcoder.com/discuss/49349</span>
来源：牛客网

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NumberOf1</span><span class="hljs-params">(n)</span></span>{
    <span class="hljs-keyword">if</span>(n &lt; <span class="hljs-number">0</span>){
        n = n &gt;&gt;&gt; <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">var</span> arr = n.toString(<span class="hljs-number">2</span>).split(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">return</span> arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a,b)</span></span>{
        <span class="hljs-keyword">return</span> b === <span class="hljs-string">"1"</span> ? a + <span class="hljs-number">1</span> : a;
    },<span class="hljs-number">0</span>);
}</code></pre>
<h3 id="40-输入一个整数数组，实现一个函数来调整该数组中数字的顺序，使得所有的奇数位于数组的前半部分，所有的偶数位于位于数组的后半部分，并保证奇数和奇数，偶数和偶数之间的相对位置不变。">40. 输入一个整数数组，实现一个函数来调整该数组中数字的顺序，使得所有的奇数位于数组的前半部分，所有的偶数位于位于数组的后半部分，并保证奇数和奇数，偶数和偶数之间的相对位置不变。</h3>
<pre><code class="language-javascript">作者：faremax
链接：https:<span class="hljs-comment">//www.nowcoder.com/discuss/49349</span>
来源：牛客网

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reOrderArray</span><span class="hljs-params">(array)</span></span>{
    <span class="hljs-keyword">var</span> result = [];
    <span class="hljs-keyword">var</span> even = [];
    <span class="hljs-keyword">array</span>.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span></span>{
        <span class="hljs-keyword">if</span>((item &amp; <span class="hljs-number">1</span>) === <span class="hljs-number">1</span>){
            result.push(item);
        } <span class="hljs-keyword">else</span> {
            even.push(item);
        }
    });
    <span class="hljs-keyword">return</span> result.concat(even);
}</code></pre>
<h3 id="41">41.</h3>
<pre><code class="language-javascript">ar a = {};
<span class="hljs-keyword">var</span> b = {<span class="hljs-attr">key</span>: <span class="hljs-string">'b'</span>};
<span class="hljs-keyword">var</span> c = {<span class="hljs-attr">key</span>: <span class="hljs-string">'c'</span>};
a[b] = <span class="hljs-number">123</span>, a[c] = <span class="hljs-number">456</span>;
<span class="hljs-built_in">console</span>.log(a[b]); <span class="hljs-comment">// 456</span></code></pre>
<h3 id="42">42.</h3>
<pre><code class="language-javascript">(<span class="hljs-name">function</span>(<span class="hljs-name">x</span>){
    return (<span class="hljs-name">function</span>(<span class="hljs-name">y</span>){
        console.log(<span class="hljs-name">x</span>)<span class="hljs-comment">;</span>
    })(<span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
})(<span class="hljs-number">1</span>) // <span class="hljs-number">1</span></code></pre>
<h3 id="43">43.</h3>
<pre><code class="language-javascript">for(<span class="hljs-name">var</span> i=0<span class="hljs-comment">;i&lt;5;i++){</span>
    setTimeout((<span class="hljs-name">function</span>(<span class="hljs-name">i</span>){console.log(<span class="hljs-name">i</span>)})(<span class="hljs-name">i</span>),i*1000)<span class="hljs-comment">;</span>
}
// <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span></code></pre>
<h3 id="文章：">文章：</h3>
<ol>
<li><a href="http://yujiangshui.com/javascript-prototype-and-create-object/">JavaScript 原型理解与创建对象应用</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures">闭包 | MDN</a></li>
<li><a href="http://yanhaijing.com/es5/">ECMAScript5.1中文版</a></li>
<li><a href="http://www.jianshu.com/p/cd3fee40ef59">前端基础进阶系列</a></li>
</ol>
</section><section id="vcomments" class=" v" data-class="v"><div class="vpanel"><div class="vwrap"><p class="cancel-reply text-right" style="display:none;" title="取消回复"><svg class="vicon cancel-reply-btn" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4220" width="22" height="22"><path d="M796.454 985H227.545c-50.183 0-97.481-19.662-133.183-55.363-35.7-35.701-55.362-83-55.362-133.183V227.545c0-50.183 19.662-97.481 55.363-133.183 35.701-35.7 83-55.362 133.182-55.362h568.909c50.183 0 97.481 19.662 133.183 55.363 35.701 35.702 55.363 83 55.363 133.183v568.909c0 50.183-19.662 97.481-55.363 133.183S846.637 985 796.454 985zM227.545 91C152.254 91 91 152.254 91 227.545v568.909C91 871.746 152.254 933 227.545 933h568.909C871.746 933 933 871.746 933 796.454V227.545C933 152.254 871.746 91 796.454 91H227.545z" p-id="4221"></path><path d="M568.569 512l170.267-170.267c15.556-15.556 15.556-41.012 0-56.569s-41.012-15.556-56.569 0L512 455.431 341.733 285.165c-15.556-15.556-41.012-15.556-56.569 0s-15.556 41.012 0 56.569L455.431 512 285.165 682.267c-15.556 15.556-15.556 41.012 0 56.569 15.556 15.556 41.012 15.556 56.569 0L512 568.569l170.267 170.267c15.556 15.556 41.012 15.556 56.569 0 15.556-15.556 15.556-41.012 0-56.569L568.569 512z" p-id="4222"></path></svg></p><div class="vheader item3"><input name="nick" placeholder="昵称" class="vnick vinput" type="text"><input name="mail" placeholder="邮箱" class="vmail vinput" type="email"><input name="link" placeholder="网址(http://)" class="vlink vinput" type="text"></div><div class="vedit"><textarea id="veditor" class="veditor vinput" placeholder="Just Go Go"></textarea><div class="vrow"><div class="vcol vcol-60 status-bar"></div><div class="vcol vcol-40 vctrl text-right"><span title="表情" class="vicon vemoji-btn"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16172" width="22" height="22"><path d="M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zM512 56.888889a455.111111 455.111111 0 1 0 455.111111 455.111111 455.111111 455.111111 0 0 0-455.111111-455.111111zM312.888889 512A85.333333 85.333333 0 1 1 398.222222 426.666667 85.333333 85.333333 0 0 1 312.888889 512z" p-id="16173"></path><path d="M512 768A142.222222 142.222222 0 0 1 369.777778 625.777778a28.444444 28.444444 0 0 1 56.888889 0 85.333333 85.333333 0 0 0 170.666666 0 28.444444 28.444444 0 0 1 56.888889 0A142.222222 142.222222 0 0 1 512 768z" p-id="16174"></path><path d="M782.222222 391.964444l-113.777778 59.733334a29.013333 29.013333 0 0 1-38.684444-10.808889 28.444444 28.444444 0 0 1 10.24-38.684445l113.777778-56.888888a28.444444 28.444444 0 0 1 38.684444 10.24 28.444444 28.444444 0 0 1-10.24 36.408888z" p-id="16175"></path><path d="M640.568889 451.697778l113.777778 56.888889a27.875556 27.875556 0 0 0 38.684444-10.24 27.875556 27.875556 0 0 0-10.24-38.684445l-113.777778-56.888889a28.444444 28.444444 0 0 0-38.684444 10.808889 28.444444 28.444444 0 0 0 10.24 38.115556z" p-id="16176"></path></svg></span><span title="预览" class="vicon vpreview-btn"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17688" width="22" height="22"><path d="M502.390154 935.384615a29.538462 29.538462 0 1 1 0 59.076923H141.430154C79.911385 994.461538 29.538462 946.254769 29.538462 886.153846V137.846154C29.538462 77.745231 79.950769 29.538462 141.390769 29.538462h741.218462c61.44 0 111.852308 48.206769 111.852307 108.307692v300.268308a29.538462 29.538462 0 1 1-59.076923 0V137.846154c0-26.899692-23.355077-49.230769-52.775384-49.230769H141.390769c-29.420308 0-52.775385 22.331077-52.775384 49.230769v748.307692c0 26.899692 23.355077 49.230769 52.775384 49.230769h360.999385z" p-id="17689"></path><path d="M196.923077 216.615385m29.538461 0l374.153847 0q29.538462 0 29.538461 29.538461l0 0q0 29.538462-29.538461 29.538462l-374.153847 0q-29.538462 0-29.538461-29.538462l0 0q0-29.538462 29.538461-29.538461Z" p-id="17690"></path><path d="M649.846154 846.769231a216.615385 216.615385 0 1 0 0-433.230769 216.615385 216.615385 0 0 0 0 433.230769z m0 59.076923a275.692308 275.692308 0 1 1 0-551.384616 275.692308 275.692308 0 0 1 0 551.384616z" p-id="17691"></path><path d="M807.398383 829.479768m20.886847-20.886846l0 0q20.886846-20.886846 41.773692 0l125.321079 125.321079q20.886846 20.886846 0 41.773693l0 0q-20.886846 20.886846-41.773693 0l-125.321078-125.321079q-20.886846-20.886846 0-41.773693Z" p-id="17692"></path></svg></span></div></div></div><div class="vrow"><div class="vcol vcol-30"><a alt="Markdown is supported" href="https://guides.github.com/features/mastering-markdown/" class="vicon" target="_blank"><svg class="markdown" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z"></path></svg></a></div><div class="vcol vcol-70 text-right"><button type="button" title="Cmd|Ctrl+Enter" class="vsubmit vbtn">提交</button></div></div><div class="vemojis" style="display:none;"></div><div class="vinput vpreview" style="display:none;"></div><div style="display:none;" class="vmark"></div></div></div><div class="vcount" style="display:none;"><span class="vnum">0</span> 评论</div><div class="vload-top text-center" style="display:none;"><i class="vspinner" style="width:30px;height:30px;"></i></div><div class="vcards"></div><div class="vload-bottom text-center" style="display:none;"><i class="vspinner" style="width:30px;height:30px;"></i></div><div class="vempty" style="display: block;">来发评论吧~</div><div class="vpage txt-center" style="display:none"><button type="button" class="vmore vbtn">加载更多...</button></div><div class="vpower txt-right">Powered By <a href="https://valine.js.org" target="_blank">Valine</a><br>v1.4.14</div></section></article></main><div class="back-to-top ">△</div><div class="sw-update-popup_wrapper__kqnqb"><div class="sw-update-popup_content__nGfn0">发现新内容!!</div><button class="button_btn__SGdXd button_btn-sm__TF0QD">刷新</button></div></div></div><script async="" src="https://www.google-analytics.com/analytics.js"></script><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-98427538-1","auto"),ga("send","pageview")</script><script>!function(i){function e(e){for(var r,t,n=e[0],o=e[1],u=e[2],l=0,f=[];l<n.length;l++)t=n[l],Object.prototype.hasOwnProperty.call(p,t)&&p[t]&&f.push(p[t][0]),p[t]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r]);for(s&&s(e);f.length;)f.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var e,r=0;r<c.length;r++){for(var t=c[r],n=!0,o=1;o<t.length;o++){var u=t[o];0!==p[u]&&(n=!1)}n&&(c.splice(r--,1),e=l(l.s=t[0]))}return e}var t={},p={1:0},c=[];function l(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return i[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=i,l.c=t,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(r,e){if(1&e&&(r=l(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)l.d(t,n,function(e){return r[e]}.bind(null,n));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="/";var r=this.webpackJsonpblog=this.webpackJsonpblog||[],n=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var s=n;a()}([])</script><script src="/static/js/2.3bfdae32.chunk.js"></script><script src="/static/js/main.c7d0cb8c.chunk.js"></script></body></html>