{"version":3,"sources":["components/ProgressBar.js","hooks/useMedia.js","hooks/useLocalStorage.js","hooks/useDarkMode.js","components/Sidebar.js","components/Loading.js","utils/date.js","utils/dom.js","components/post-list/index.js","hooks/useArticles.js","hooks/useScrollHistory.js","views/Home.js","views/Post.js","views/About.js","hooks/useEventListener.js","hooks/useScroll.js","App.js","serviceWorker.js","index.js"],"names":["ProgressBar","className","queries","values","defaultValue","mediaQueryLists","map","q","window","matchMedia","getValue","index","findIndex","mql","matches","useState","value","setValue","useEffect","handler","forEach","addListener","removeListener","useLocalStorage","key","initialValue","item","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","enabledState","setEnabledState","prefersDarkMode","useMedia","enabled","element","document","body","classList","add","remove","Sidebar","useDarkMode","enableDarkMode","duration","Date","getTime","total","Math","floor","to","title","href","target","rel","onClick","Loading","isValidDate","date","isNaN","pad","data","tmpVal","Number","toString","getLocalYearMonthDay","d","year","getFullYear","month","getMonth","getDate","hour","getHours","minute","getMinutes","second","getSeconds","parseDatetime","scrollSmoothTo","position","getComputedStyle","scrollBehavior","requestAnimationFrame","callback","setTimeout","step","scrollTop","distance","nextScrollTop","max","min","abs","style","List","posts","slug","id","createDate","dangerouslySetInnerHTML","__html","intro","backgroundImage","thumb","useArticles","articles","useArticle","find","_","article","setArticle","historyMap","useScrollHistory","location","useLocation","documentElement","pathname","Home","filter","Post","useParams","Valine","el","appId","appKey","visitor","recordIP","path","content","useEventListener","eventName","savedHandler","useRef","current","addEventListener","eventListener","event","removeEventListener","useScroll","BackToTop","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","AV","require","ReactDOM","render","exact","component","About","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","e","platforms","userChoice","outcome","reason"],"mappings":"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","file":"static/js/main.59ad918c.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function ProgressBar () {\n  return (\n    <div className='progress-bar'>\n      <div className='bg-red'></div>\n      <div className='bg-orange'></div>\n      <div className='bg-yellow'></div>\n      <div className='bg-green'></div>\n      <div className='bg-blue'></div>\n      <div className='bg-indigo'></div>\n      <div className='bg-purple'></div>\n    </div>\n  )\n}","import { useState, useEffect } from 'react'\n\nexport default (queries, values, defaultValue) => {\n  const mediaQueryLists = queries.map(q => window.matchMedia(q))\n\n  const getValue = () => {\n    const index = mediaQueryLists.findIndex(mql => mql.matches)\n    return typeof values[index] !== 'undefined' ? values[index] : defaultValue\n  }\n\n  const [value, setValue] = useState(getValue)\n\n  useEffect(\n    () => {\n      const handler = () => setValue(getValue)\n      mediaQueryLists.forEach(mql => mql.addListener(handler))\n      return () => mediaQueryLists.forEach(mql => mql.removeListener(handler))\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  return value\n}","import { useState } from 'react'\n\nconst useLocalStorage = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.log(error)\n      return initialValue\n    }\n  })\n\n  const setValue = value => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import { useEffect } from 'react'\nimport useMedia from './useMedia'\nimport useLocalStorage from './useLocalStorage'\n\nfunction usePerfersDarkMode () {\n  return useMedia(['(prefers-color-scheme: dark'], [true], false)\n}\n\nexport default () => {\n  const [enabledState, setEnabledState] = useLocalStorage('dark-mode-enabled')\n\n  const prefersDarkMode = usePerfersDarkMode()\n\n  const enabled =\n    typeof enabledState !== 'undefined' ? enabledState : prefersDarkMode\n\n  useEffect(\n    () => {\n      const className = 'dark-mode'\n      const element = window.document.body\n      if (enabled) {\n        element.classList.add(className)\n      } else {\n        element.classList.remove(className)\n      }\n    },\n    [enabled]\n  )\n\n  return [enabled, setEnabledState]\n}\n","import React from 'react';\nimport {\n  Link,\n} from \"react-router-dom\";\nimport useDarkMode from '../hooks/useDarkMode'\n\nexport default function Sidebar () {\n  const [enabled, enableDarkMode] = useDarkMode()\n\n  const birthDay = 1583224596000\n  const now = new Date()\n  const duration = now.getTime() - birthDay\n  const total = Math.floor(duration / (1000 * 60 * 60 * 24));\n\n  return (\n    <div className='sidebar text-left'>\n      <h1>\n        <Link className='logo' to='/'>打开天眼看文章</Link>\n      </h1>\n      <p>TECH | LIFE | X</p>\n      <p className='font-sm'>\n        <Link className='text-blue' to='/about' title='about me'>@me |</Link>\n        <a className='text-green' href='https://github.com/xiao555' title='github' target='_blank' rel='noopener noreferrer'>@github</a>\n      </p>\n      <p className='font-sm'>\n        <a href='mailto:zhangruiwu32@gmail.com'>zhangruiwu32@gmail.com</a>\n      </p>\n      <p><small>本站已存活 { total } 天</small></p>\n      <button className='border-0 px-0' onClick={() => enableDarkMode(!enabled)}>\n        {\n          enabled ? <i className='fas fa-sun'></i> : <i className='fas fa-moon'></i>\n        }\n        {/* <svg width=\"14\" height=\"14\" class=\"FontsNinjaExt-main-jss16\"><path d=\"M11.95 2.05A6.954 6.954 0 0 0 7 0C5.13 0 3.373.728 2.05 2.05A6.952 6.952 0 0 0 0 7c0 1.87.728 3.627 2.05 4.95A6.954 6.954 0 0 0 7 14c1.87 0 3.627-.728 4.95-2.05A6.954 6.954 0 0 0 14 7c0-1.87-.728-3.627-2.05-4.95zm-1.12 1.051L3.102 10.83A5.426 5.426 0 0 1 1.534 7a5.43 5.43 0 0 1 1.601-3.865A5.43 5.43 0 0 1 7 1.535c1.444 0 2.802.556 3.83 1.566z\" fill=\"#037D5E\" fill-rule=\"evenodd\"></path></svg> */}\n      </button>\n    </div>\n  )\n}","import React from 'react';\n\nfunction Loading() {\n  return (\n    <h1>Loading...</h1>\n  )\n}\n\nexport default Loading\n","function isValidDate (date) {\n  return date instanceof Date && !isNaN(date)\n}\n\nfunction pad(data) {\n  let tmpVal = Number(data)\n  if (tmpVal < 10) {\n    return '0' + tmpVal;\n  }\n  return tmpVal.toString();\n}\n\nfunction parseDatetime (value) {\n  if (!isValidDate(value)) return {}\n  return {\n    year: value.getFullYear(),\n    month: pad(value.getMonth() + 1), // 月份取值0-11\n    date: pad(value.getDate()),\n    hour: pad(value.getHours()),\n    minute: pad(value.getMinutes()),\n    second: pad(value.getSeconds())\n  }\n}\n\nexport function getLocalYearMonthDay (value) {\n  let d = new Date(value)\n  if (!isValidDate(d)) return value\n  const { year, month, date } = parseDatetime(d)\n  return `${year}-${month}-${date}`\n}","/**\n * 平滑滚动到指定位置\n * @param {Element} element - 平滑滚动的元素\n * @param {Number} position - 滚动到的位置\n */\nexport const scrollSmoothTo = (element, position) => {\n  if (typeof window.getComputedStyle(document.body).scrollBehavior === 'undefined') {\n    if (!window.requestAnimationFrame) {\n      window.requestAnimationFrame = function (callback, element) {\n        return setTimeout(callback, 17)\n      }\n    }\n    const step = () => {\n      const scrollTop = element.scrollTop\n      const distance = position - scrollTop\n      const nextScrollTop = scrollTop + (distance >= 0 ? Math.max(distance / 5, 1) : Math.min(distance / 5, -1))\n      if (Math.abs(position - scrollTop) <= 1) {\n        element.scrollTop = position\n      } else {\n        element.scrollTop = nextScrollTop\n        requestAnimationFrame(step)\n      }\n    }\n    step()\n  } else {\n    element.style.scrollBehavior = 'smooth'\n    element.scrollTop = position\n  }\n}\n","import React from 'react'\nimport './style.css'\nimport { Link } from \"react-router-dom\"\nimport { getLocalYearMonthDay } from '../../utils'\n\nfunction List({ posts }) {\n  return (\n    posts.map(item =>\n      <Link to={`/post/${item.slug}`} key={item.id}>\n        <article className='post-list-item'>\n          <div className='post-list-item-info'>\n            <h2>{ item.title }</h2>\n            <p><small>{ getLocalYearMonthDay(item.createDate) }</small></p>\n            <p dangerouslySetInnerHTML={{ __html: item.intro }}></p>\n          </div>\n          <div className='post-list-item-thumb-wrapper'>\n            <div className='post-list-item-thumb' style={{ backgroundImage: `url(${item.thumb})` }}></div>\n          </div>\n        </article>\n      </Link>\n    )\n  )\n}\n\nexport default List\n","import { useState, useEffect } from 'react'\nimport articles from '../articles.json'\n\nconst useArticles = () => {\n  return { articles }\n}\n\nconst useArticle = (id) => {\n  const { articles } = useArticles()\n  const [article, setArticle] = useState(articles ? articles.find(_ => _.id === id) : null)\n\n  useEffect(() => {\n    if (articles) {\n      const item = articles.find(_ => _.id === id)\n      if (item) {\n        setArticle(item)\n      } else {\n        setArticle(null)\n      }\n    }\n  }, [articles, id])\n  return article\n}\n\nexport { useArticles, useArticle }","import { useEffect } from 'react'\nimport { useLocation } from \"react-router-dom\"\n\nlet historyMap = JSON.parse(window.localStorage.getItem('scroll-history')) || {}\n\nconst useScrollHistory = () => {\n  const location = useLocation()\n\n  useEffect(() => {\n    document.documentElement.scrollTop = historyMap[location.pathname] || 0\n    return () => {\n      const scrollTop = document.documentElement.scrollTop\n      historyMap[location.pathname] = scrollTop\n      window.localStorage.setItem('scroll-history', JSON.stringify(historyMap))\n    }\n  // 传入空数组，模拟componentDidMount，componentWillUnmount\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport { useScrollHistory }\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport PostList from '../components/post-list/index.js'\nimport { useArticles } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Home() {\n  const { articles } = useArticles()\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `首页 | 打开天眼看文章`\n  })\n\n  return (\n    articles\n      ? <div className='main-content'>\n          <PostList posts={articles.filter(item => item.id !== 'about-me')}/>\n        </div>\n      : <Loading />\n  )\n}\n\nexport default Home;\n","import React, { useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\nimport Valine from 'valine'\n\nfunction Post() {\n  const { id } = useParams()\n  const article = useArticle(id)\n\n  useScrollHistory()\n\n  useEffect(() => {\n    document.title = `${article.title} | 打开天眼看文章`\n  })\n\n  useEffect(() => {\n    new Valine({\n      el:'#vcomments',\n      appId: '2VQxghv1P34UuWX18ynpOBhX-gzGzoHsz',\n      appKey: 'IUpu9P5iuaym0hGnWxogUvon',\n      visitor: true,\n      recordIP: true,\n      path: id\n    })\n  }, [id])\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p>\n            <small>{ getLocalYearMonthDay(article.createDate) }</small>\n            <span id={id} className='leancloud_visitors ml-1'><small>阅读量</small> <small className=\"leancloud-visitors-count\"></small></span>\n          </p>\n          <section dangerouslySetInnerHTML={{ __html: article.content }}></section>\n          <section id='vcomments'></section>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import React, { useEffect } from 'react';\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Post() {\n  const article = useArticle('about-me')\n\n  useEffect(() => {\n    document.title = `关于 | 打开天眼看文章`\n  })\n\n  useScrollHistory()\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p><small>{ getLocalYearMonthDay(article.createDate) }</small></p>\n          <p dangerouslySetInnerHTML={{ __html:article.content }}></p>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import { useRef, useEffect } from 'react'\n\nconst useEventListener = (eventName, handler, element = window) => {\n  const savedHandler = useRef()\n\n  useEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const isSupported = element && element.addEventListener\n    if (!isSupported) return\n\n    const eventListener = event => savedHandler.current(event)\n\n    element.addEventListener(eventName, eventListener)\n\n    return () => {\n      element.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element])\n}\n\n\nexport default useEventListener","import { useState } from 'react'\nimport  useEventListener from './useEventListener'\n\nconst useScroll = (element = document.documentElement) => {\n  const [value, setValue] = useState(element.scrollTop)\n\n  const handler = () => {\n    setValue(element.scrollTop)\n  }\n\n  useEventListener('scroll', handler)\n\n  return [value]\n}\n\nexport default useScroll","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport './App.css';\nimport ProgressBar from './components/ProgressBar'\nimport Sidebar from './components/Sidebar'\nimport Home from './views/Home'\nimport Post from './views/Post'\nimport About from './views/About'\nimport useScroll from './hooks/useScroll'\nimport { scrollSmoothTo } from './utils'\n\nfunction BackToTop () {\n  return (\n    <div className='back-to-top' onClick={() => scrollSmoothTo(document.documentElement, 0)}>\n      <i className=\"fa fa-fighter-jet\"></i>\n    </div>\n  )\n}\n\nexport default function App() {\n  const [scrollTop] = useScroll()\n\n  return (\n    <Router>\n      <div className='app'>\n        <ProgressBar/>\n        <main className='main'>\n          <Sidebar/>\n          <Switch>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/post/:id\" component={Post}/>\n            <Route path=\"/about\" component={About}/>\n          </Switch>\n        </main>\n        {\n          scrollTop > 800 && <BackToTop />\n        }\n      </div>\n    </Router>\n  )\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'highlight.js/styles/dark.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n// Register AV objects to the global\nwindow.AV = require('leancloud-storage');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n\nwindow.addEventListener(\"beforeinstallprompt\", function(e) {\n  // log the platforms provided as options in an install prompt\n  console.log(e.platforms); // e.g., [\"web\", \"android\", \"windows\"]\n  e.userChoice.then(function(outcome) {\n    console.log(outcome); // either \"installed\", \"dismissed\", etc.\n  }, (reason) => console.error(reason));\n});\n"],"sourceRoot":""}